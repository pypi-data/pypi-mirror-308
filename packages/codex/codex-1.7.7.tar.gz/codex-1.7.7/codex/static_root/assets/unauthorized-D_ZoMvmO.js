import{p as $,J as N,g as D,u as M,a,aN as Z,t as ee,aO as te,aP as be,aR as ye,c as F,d as _e,e as A,C as q,D as b,E as I,_ as C,l as u,v as c,H as T,R as ke,L as we,k as g,b as X,r as pe,bt as Ve,bu as Se,bv as Ce,m as E,F as ae,I as Le,B as xe,h as Be,A as ne,w as p,X as H,s as Pe,bw as Ae,n as Ie,a9 as Te,K as Ee,br as $e,V as De,y as Me,a5 as Re,bx as Fe,al as Ne,q as Ue}from"./main-CqJrEeXs.js";import{d as oe,C as j,V as ze}from"./VDialog-JYjcWZ0u.js";import{a as We}from"./change-password-dialog-bLA6nGQc.js";import{S as Oe,V as He}from"./VForm-CsURMe0X.js";import{d as se,g as Ke,k as qe,u as je,h as Q,l as Y,f as Ge,b as K}from"./VSelectionControl-C-U8aPN3.js";import{c as G,z as Je,x as Xe,i as Qe,e as ie,A as Ye,y as Ze,j as et,l as x,D as tt,k as le,L as at,E as re,o as de,F as nt,q as ue,V as ot}from"./forwardRefs-Dab8mCr8.js";import{u as st}from"./ssrBoot-F-kio-Y3.js";const it=$({text:String,...N(),...G()},"VToolbarTitle"),lt=D()({name:"VToolbarTitle",props:it(),setup(e,o){let{slots:t}=o;return M(()=>{const n=!!(t.default||t.text||e.text);return a(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var s;return[n&&a("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(s=t.default)==null?void 0:s.call(t)])]}})}),{}}}),rt=[null,"prominent","default","comfortable","compact"],dt=$({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>rt.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Je(),...N(),...Xe(),...Qe(),...G({tag:"header"}),...Z()},"VToolbar"),ut=D()({name:"VToolbar",props:dt(),setup(e,o){var L;let{slots:t}=o;const{backgroundColorClasses:n,backgroundColorStyles:s}=ie(ee(e,"color")),{borderClasses:l}=Ye(e),{elevationClasses:r}=Ze(e),{roundedClasses:d}=et(e),{themeClasses:i}=te(e),{rtlClasses:y}=be(),m=ye(!!(e.extended||(L=t.extension)!=null&&L.call(t))),_=F(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),V=F(()=>m.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return _e({VBtn:{variant:"text"}}),M(()=>{var f;const B=!!(e.title||t.title),k=!!(t.image||e.image),S=(f=t.extension)==null?void 0:f.call(t);return m.value=!!(e.extended||S),a(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},n.value,l.value,r.value,d.value,i.value,y.value,e.class],style:[s.value,e.style]},{default:()=>[k&&a("div",{key:"image",class:"v-toolbar__image"},[t.image?a(x,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):a(oe,{key:"image-img",cover:!0,src:e.image},null)]),a(x,{defaults:{VTabs:{height:A(_.value)}}},{default:()=>{var h,v,R;return[a("div",{class:"v-toolbar__content",style:{height:A(_.value)}},[t.prepend&&a("div",{class:"v-toolbar__prepend"},[(h=t.prepend)==null?void 0:h.call(t)]),B&&a(lt,{key:"title",text:e.title},{text:t.title}),(v=t.default)==null?void 0:v.call(t),t.append&&a("div",{class:"v-toolbar__append"},[(R=t.append)==null?void 0:R.call(t)])])]}}),a(x,{defaults:{VTabs:{height:A(V.value)}}},{default:()=>[a(se,null,{default:()=>[m.value&&a("div",{class:"v-toolbar__extension",style:{height:A(V.value)}},[S])]})]})]})}),{contentHeight:_,extensionHeight:V}}}),ct={name:"AppBanner",computed:{...q(b,["isBanner"]),...I(b,{banner:e=>e.adminFlags.bannerText})}};function mt(e,o,t,n,s,l){return e.isBanner?(u(),c(ut,{key:0,id:"banner",height:"36",density:"compact",flat:"",title:e.banner},null,8,["title"])):T("",!0)}const gt=C(ct,[["render",mt],["__scopeId","data-v-76681126"]]),ft={name:"AdminBrowserLink",components:{CodexListItem:j},data(){return{mdiBookshelf:ke}},computed:{...q(we,["lastRoute"])}};function ht(e,o,t,n,s,l){const r=g("CodexListItem");return u(),c(r,{to:e.lastRoute,"prepend-icon":s.mdiBookshelf,title:"Browser"},null,8,["to","prepend-icon"])}const vt=C(ft,[["render",ht]]),bt=$({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ke(),...qe()},"VSwitch"),yt=D()({name:"VSwitch",inheritAttrs:!1,props:bt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,o){let{attrs:t,slots:n}=o;const s=X(e,"indeterminate"),l=X(e,"modelValue"),{loaderClasses:r}=tt(e),{isFocused:d,focus:i,blur:y}=je(e),m=pe(),_=Ve&&window.matchMedia("(forced-colors: active)").matches,V=F(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),L=Se(),B=F(()=>e.id||`switch-${L}`);function k(){s.value&&(s.value=!1)}function S(f){var h,v;f.stopPropagation(),f.preventDefault(),(v=(h=m.value)==null?void 0:h.input)==null||v.click()}return M(()=>{const[f,h]=Ce(t),v=Q.filterProps(e),R=Y.filterProps(e);return a(Q,E({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},r.value,e.class]},f,v,{modelValue:l.value,"onUpdate:modelValue":U=>l.value=U,id:B.value,focused:d.value,style:e.style}),{...n,default:U=>{let{id:ce,messagesId:me,isDisabled:ge,isReadonly:fe,isValid:J}=U;const z={model:l,isValid:J};return a(Y,E({ref:m},R,{modelValue:l.value,"onUpdate:modelValue":[P=>l.value=P,k],id:ce.value,"aria-describedby":me.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:ge.value,readonly:fe.value,onFocus:i,onBlur:y},h),{...n,default:P=>{let{backgroundColorClasses:W,backgroundColorStyles:w}=P;return a("div",{class:["v-switch__track",_?void 0:W.value],style:w.value,onClick:S},[n["track-true"]&&a("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](z)]),n["track-false"]&&a("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](z)])])},input:P=>{let{inputNode:W,icon:w,backgroundColorClasses:he,backgroundColorStyles:ve}=P;return a(ae,null,[W,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":w||e.loading},e.inset||_?void 0:he.value],style:e.inset?void 0:ve.value},[n.thumb?a(x,{defaults:{VIcon:{icon:w,size:"x-small"}}},{default:()=>[n.thumb({...z,icon:w})]}):a(Ge,null,{default:()=>[e.loading?a(at,{name:"v-switch",active:!0,color:J.value===!1?void 0:V.value},{default:O=>n.loader?n.loader(O):a(re,{active:O.isActive,color:O.color,indeterminate:!0,size:"16",width:"2"},null)}):w&&a(le,{key:String(w),icon:w,size:"x-small"},null)]})])])}})}})}),{}}}),_t={name:"AuthLoginDialog",components:{SubmitFooter:Oe,CodexListItem:j},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:Le}},computed:{...I(xe,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...I(b,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...Be(b,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:o})=>(this.submitButtonEnabled=o,this.submitButtonEnabled)).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){window.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){window.removeEventListener("keyup",this._keyUpListener)},methods:{...ne(b,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>(this.showLoginDialog=this.formErrors&&this.formErrors.length>0,this.showLoginDialog)).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:o})=>{if(!o)return;const t=this.registerMode?"register":"login";return this.doAuth(t)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function kt(e,o,t,n,s,l){const r=g("CodexListItem"),d=g("SubmitFooter");return u(),c(ze,{modelValue:e.showLoginDialog,"onUpdate:modelValue":o[7]||(o[7]=i=>e.showLoginDialog=i),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:p(({props:i})=>[a(r,E(i,{"prepend-icon":s.mdiLogin,title:l.loginLabel}),null,16,["prepend-icon","title"])]),default:p(()=>[a(He,{id:"authDialog",ref:"form"},{default:p(()=>[a(K,{modelValue:s.credentials.username,"onUpdate:modelValue":o[0]||(o[0]=i=>s.credentials.username=i),autocomplete:"username",label:"Username",rules:s.rules.username,clearable:"",autofocus:"",onKeydown:o[1]||(o[1]=H(i=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),a(K,{ref:"password",modelValue:s.credentials.password,"onUpdate:modelValue":o[2]||(o[2]=i=>s.credentials.password=i),autocomplete:s.registerMode?"new-password":"current-password",label:"Password",rules:s.rules.password,clearable:"",type:"password",onKeydown:o[3]||(o[3]=H(i=>{s.registerMode?e.$refs.passwordConfirm.focus():l.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),a(se,null,{default:p(()=>[s.registerMode?(u(),c(K,{key:0,ref:"passwordConfirm",modelValue:s.credentials.passwordConfirm,"onUpdate:modelValue":o[4]||(o[4]=i=>s.credentials.passwordConfirm=i),autocomplete:"new-password",label:"Confirm Password",rules:s.rules.passwordConfirm,clearable:"",type:"password",onKeydown:H(l.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):T("",!0)]),_:1}),e.adminFlags.registration?(u(),c(yt,{key:0,modelValue:s.registerMode,"onUpdate:modelValue":o[5]||(o[5]=i=>s.registerMode=i),label:"Register"},{default:p(()=>o[8]||(o[8]=[Pe(" Register ")])),_:1},8,["modelValue"])):T("",!0),a(d,{verb:s.registerMode?"Register":"Login",table:"",disabled:!s.submitButtonEnabled,onSubmit:l.submit,onCancel:o[6]||(o[6]=i=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const wt=C(_t,[["render",kt],["__scopeId","data-v-8afb3788"]]),pt={name:"AuthMenu",components:{AuthLoginDialog:wt,ChangePasswordDialog:We,CodexListItem:j},props:{showChangePassword:{type:Boolean,default:!0}},data(){return{mdiLogout:Ae}},computed:{...I(b,{user:e=>e.user}),logoutTitle(){return`Logout ${this.user.username}`}},methods:{...ne(b,["logout"])}},Vt={key:0};function St(e,o,t,n,s,l){const r=g("CodexListItem"),d=g("ChangePasswordDialog"),i=g("AuthLoginDialog");return e.user?(u(),Ie("div",Vt,[a(r,{"prepend-icon":s.mdiLogout,title:l.logoutTitle,onClick:Te(e.logout,["stop"])},null,8,["prepend-icon","title","onClick"]),t.showChangePassword?(u(),c(d,{key:0,user:e.user},null,8,["user"])):T("",!0)])):(u(),c(i,{key:1}))}const Ct=C(pt,[["render",St]]),Lt={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function xt(e,o,t,n,s,l){return u(),c(re,E({"aria-label":"loading",class:"codexProgressCircular",indeterminate:t.indeterminate},e.$attrs),null,16,["indeterminate"])}const Bt=C(Lt,[["render",xt],["__scopeId","data-v-7bb4cf22"]]),Pt=$({actionText:String,bgColor:String,color:String,icon:Ee,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...N(),...de(),...nt({size:void 0}),...Z()},"VEmptyState"),At=D()({name:"VEmptyState",props:Pt(),emits:{"click:action":e=>!0},setup(e,o){let{emit:t,slots:n}=o;const{themeClasses:s}=te(e),{backgroundColorClasses:l,backgroundColorStyles:r}=ie(ee(e,"bgColor")),{dimensionStyles:d}=ue(e),{displayClasses:i}=$e();function y(m){t("click:action",m)}return M(()=>{var S,f,h;const m=!!(n.actions||e.actionText),_=!!(n.headline||e.headline),V=!!(n.title||e.title),L=!!(n.text||e.text),B=!!(n.media||e.image||e.icon),k=e.size||(e.image?200:96);return a("div",{class:["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},s.value,l.value,i.value,e.class],style:[r.value,d.value,e.style]},[B&&a("div",{key:"media",class:"v-empty-state__media"},[n.media?a(x,{key:"media-defaults",defaults:{VImg:{src:e.image,height:k},VIcon:{size:k,icon:e.icon}}},{default:()=>[n.media()]}):a(ae,null,[e.image?a(oe,{key:"image",src:e.image,height:k},null):e.icon?a(le,{key:"icon",color:e.color,size:k,icon:e.icon},null):void 0])]),_&&a("div",{key:"headline",class:"v-empty-state__headline"},[((S=n.headline)==null?void 0:S.call(n))??e.headline]),V&&a("div",{key:"title",class:"v-empty-state__title"},[((f=n.title)==null?void 0:f.call(n))??e.title]),L&&a("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:A(e.textWidth)}},[((h=n.text)==null?void 0:h.call(n))??e.text]),n.default&&a("div",{key:"content",class:"v-empty-state__content"},[n.default()]),m&&a("div",{key:"actions",class:"v-empty-state__actions"},[a(x,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",text:e.actionText}}},{default:()=>{var v;return[((v=n.actions)==null?void 0:v.call(n,{props:{onClick:y}}))??a(ot,{onClick:y},null)]}})])])}),{}}}),It={name:"EmptyState"};function Tt(e,o,t,n,s,l){return u(),c(At,{class:"empty"},De({_:2},[Me(e.$slots,(r,d)=>({name:d,fn:p(i=>[Re(e.$slots,d,E({props:r},i),void 0,!0)])}))]),1024)}const Et=C(It,[["render",Tt],["__scopeId","data-v-c7e33c8c"]]),$t=$({scrollable:Boolean,...N(),...de(),...G({tag:"main"})},"VMain"),Dt=D()({name:"VMain",props:$t(),setup(e,o){let{slots:t}=o;const{dimensionStyles:n}=ue(e),{mainStyles:s}=Fe(),{ssrBootStyles:l}=st();return M(()=>a(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[s.value,l.value,n.value,e.style]},{default:()=>{var r,d;return[e.scrollable?a("div",{class:"v-main__scroller"},[(r=t.default)==null?void 0:r.call(t)]):(d=t.default)==null?void 0:d.call(t)]}})),{}}}),Mt={name:"UnauthorizedEmptyState",components:{AppBanner:gt,AdminBrowserLink:vt,AuthMenu:Ct,PlaceholderLoading:Bt,EmptyState:Et},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:Ne}},computed:{...q(b,["isAuthChecked","isAuthorized","isUserAdmin"]),...I(b,{showAdminBrowserLink(e){var o,t,n;return((n=(t=(o=this.$router.currentRoute)==null?void 0:o.value)==null?void 0:t.name)==null?void 0:n.startsWith("admin"))&&e.adminFlags.nonUsers},text(e){return e.adminFlags.registration?"":"Registration is disabled"}})}},Rt={class:"login"};function Ft(e,o,t,n,s,l){const r=g("AppBanner"),d=g("AdminBrowserLink"),i=g("AuthMenu"),y=g("EmptyState"),m=g("PlaceholderLoading");return u(),c(Dt,{id:"unauthorized"},{default:p(()=>[a(r),e.isAuthChecked?(u(),c(y,{key:0,class:"empty",headline:"Unauthorized",text:e.text,icon:s.mdiLockOutline},{default:p(()=>[Ue("div",Rt,[e.showAdminBrowserLink?(u(),c(d,{key:0})):T("",!0),a(i,{"show-change-password":!1})])]),_:1},8,["text","icon"])):(u(),c(m,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const qt=C(Mt,[["render",Ft],["__scopeId","data-v-347bd693"]]);export{gt as A,Et as E,Bt as P,qt as U,lt as V,ut as a,vt as b,Dt as c,Ct as d};
