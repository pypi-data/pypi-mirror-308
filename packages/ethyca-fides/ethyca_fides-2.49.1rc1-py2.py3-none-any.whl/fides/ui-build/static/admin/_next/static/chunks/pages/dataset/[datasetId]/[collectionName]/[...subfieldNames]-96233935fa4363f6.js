(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2096],{16383:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]/[...subfieldNames]",function(){return a(49674)}])},60262:function(e,t,a){"use strict";a.d(t,{f:function(){return i}});var l=a(24246);let i=(0,a(6173).IUT)({displayName:"FieldIcon",viewBox:"0 0 16 16",path:(0,l.jsx)("path",{d:"M12.6667 12.6667V10.6667H3.33333V12.6667H12.6667ZM12.6667 9.33333V6.66667H3.33333V9.33333H12.6667ZM12.6667 5.33333V3.33333H3.33333V5.33333H12.6667ZM3.33333 14C2.96667 14 2.65278 13.8694 2.39167 13.6083C2.13056 13.3472 2 13.0333 2 12.6667V3.33333C2 2.96667 2.13056 2.65278 2.39167 2.39167C2.65278 2.13056 2.96667 2 3.33333 2H12.6667C13.0333 2 13.3472 2.13056 13.6083 2.39167C13.8694 2.65278 14 2.96667 14 3.33333V12.6667C14 13.0333 13.8694 13.3472 13.6083 13.6083C13.3472 13.8694 13.0333 14 12.6667 14H3.33333Z",fill:"currentColor"})})},49674:function(e,t,a){"use strict";a.r(t);var l=a(24246),i=a(92222),o=a(59003),s=a(6173),n=a(30454),d=a.n(n),r=a(47215),c=a.n(r),u=a(86677),m=a(27378),f=a(90824),x=a(62257),g=a(60262),h=a(29137),p=a(43124),v=a(11032),C=a(37541),b=a(8540),j=a(19906),w=a(52987),R=a(39006),_=a(89955),k=a(5067);let y=(0,i.Cl)(),M=()=>(0,l.jsx)(s.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,l.jsx)(s.gCW,{children:(0,l.jsx)(s.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,u.useRouter)(),[t]=(0,w.TG)(),a=decodeURIComponent(e.query.datasetId),n=decodeURIComponent(e.query.collectionName),r=e.query.subfieldNames.map(decodeURIComponent),{isLoading:N,data:V}=(0,w.oM)(a),I=(0,m.useMemo)(()=>(null==V?void 0:V.collections)||[],[V]).find(e=>e.name===n),z=(0,m.useMemo)(()=>(null==I?void 0:I.fields)||[],[I]),H=(0,m.useMemo)(()=>{let e=z;return r.forEach(t=>{let a=e.find(e=>e.name===t);e=(null==a?void 0:a.fields)||[]}),e},[z,r]),[S,T]=(0,m.useState)(),Z=(0,m.useCallback)(e=>{let{dataCategory:a,field:l}=e,i=l.data_categories||[],o=(0,k.Fk)({dataset:V,collectionName:n,subfields:[...r,l.name]}),s=d()(V);c()(s,"".concat(o,".data_categories"),[...i,a]),t(s)},[V,t,n,r]),E=(0,m.useCallback)(e=>{let{dataCategory:a,field:l}=e,i=l.data_categories||[],o=(0,k.Fk)({dataset:V,collectionName:n,subfields:[...r,null==l?void 0:l.name]}),s=d()(V);c()(s,"".concat(o,".data_categories"),i.filter(e=>e!==a)),t(s)},[V,t,n,r]),F=(0,m.useCallback)(t=>{let l=[...r.map(encodeURIComponent),t.name];e.push({pathname:v.y1,query:{datasetId:a,collectionName:n,subfieldNames:l}})},[a,e,n,r]),q=(0,m.useMemo)(()=>[y.accessor(e=>e.name,{id:"name",cell:e=>{var t;let a=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,l.jsx)(b.G3,{fontWeight:a?"semibold":"normal",value:e.getValue()})},header:e=>(0,l.jsx)(b.Rr,{value:"Field Name",...e}),size:180}),y.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,l.jsx)(b.A4,{value:e.getValue()}):(0,l.jsx)(b.G3,{value:void 0}),header:e=>(0,l.jsx)(b.Rr,{value:"Type",...e}),size:80}),y.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(b.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(b.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),y.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{var t;let a=e.row.original;return!(e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0)&&(0,l.jsx)(j.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>Z({dataCategory:e,field:a}),onRemoveTaxonomy:e=>E({dataCategory:e,field:a})})},header:e=>(0,l.jsx)(b.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),y.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,a=t.original;return(0,l.jsx)(s.Ugi,{spacing:0,"data-testid":"field-".concat(a.name),children:(0,l.jsx)(s.wpx,{size:"small",icon:(0,l.jsx)(s.dY8,{}),onClick:()=>{O(a),W(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[Z,E]),U=(0,m.useMemo)(()=>S?H.filter(e=>e.name.toLowerCase().includes(S.toLowerCase())):H,[H,S]),A=(0,o.b7)({getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),columns:q,data:U,columnResizeMode:"onChange"}),[G,W]=(0,m.useState)(!1),[D,O]=(0,m.useState)(),P=(0,m.useMemo)(()=>{let e=[{title:"All datasets",icon:(0,l.jsx)(f.V,{boxSize:4}),link:v.$m},{title:a,link:{pathname:v.o5,query:{datasetId:a}},icon:(0,l.jsx)(x.l,{boxSize:5})},{title:n,icon:(0,l.jsx)(h.$,{boxSize:5}),link:{pathname:v.RF,query:{datasetId:a,collectionName:n}}}];return r.forEach((t,i)=>{e.push({title:t,link:i<r.length-1?{pathname:v.y1,query:{datasetId:a,collectionName:n,subfieldNames:r.slice(0,i+1).map(encodeURIComponent)}}:void 0,icon:(0,l.jsx)(g.f,{boxSize:5})})}),e},[a,n,r]);return(0,l.jsxs)(p.Z,{title:"Dataset - ".concat(a),mainProps:{paddingTop:0},children:[(0,l.jsx)(C.Z,{breadcrumbs:[{title:"Datasets"}],children:(0,l.jsx)(R.Z,{breadcrumbs:P})}),N?(0,l.jsx)(b.I4,{rowHeight:36,numRows:15}):(0,l.jsxs)(s.xuv,{"data-testid":"fields-table",children:[(0,l.jsx)(b.Q$,{children:(0,l.jsx)(b.HO,{globalFilter:S,setGlobalFilter:T,placeholder:"Search",testid:"fields-search"})}),(0,l.jsx)(b.ZK,{tableInstance:A,emptyTableNotice:(0,l.jsx)(M,{}),onRowClick:F,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,l.jsx)(_.Z,{isOpen:G,onClose:()=>{W(!1),O(void 0)},field:D,dataset:V,collectionName:n,subfields:r})]})]})}}},function(e){e.O(0,[8033,6451,4554,2866,9278,1995,8540,7096,6711,2888,9774,179],function(){return e(e.s=16383)}),_N_E=e.O()}]);