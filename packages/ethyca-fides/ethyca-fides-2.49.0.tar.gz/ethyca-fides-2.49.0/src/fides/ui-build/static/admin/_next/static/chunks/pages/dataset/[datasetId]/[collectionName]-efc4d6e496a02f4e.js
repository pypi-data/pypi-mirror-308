(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6556],{59972:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]",function(){return t(82969)}])},82969:function(e,a,t){"use strict";t.r(a);var l=t(24246),i=t(92222),o=t(59003),s=t(6173),n=t(86677),d=t(27378),r=t(90824),c=t(62257),u=t(29137),m=t(43124),x=t(11032),g=t(37541),f=t(8540),h=t(19906),v=t(52987),p=t(39006),j=t(89955),b=t(5067);let w=(0,i.Cl)(),C=()=>(0,l.jsx)(s.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,l.jsx)(s.gCW,{children:(0,l.jsx)(s.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});a.default=()=>{let e=(0,n.useRouter)(),[a]=(0,v.TG)(),t=decodeURIComponent(e.query.datasetId),_=decodeURIComponent(e.query.collectionName),{isLoading:R,data:k}=(0,v.oM)(t),N=(0,d.useMemo)(()=>(null==k?void 0:k.collections)||[],[k]),y=N.find(e=>e.name===_),I=(0,d.useMemo)(()=>(null==y?void 0:y.fields)||[],[y]),[M,z]=(0,d.useState)(),S=(0,d.useCallback)(e=>{let{dataCategory:t,field:l}=e,i=l.data_categories||[],o={...l,data_categories:[...i,t]},s=N.indexOf(y),n=y.fields.indexOf(l);a((0,b._n)(k,o,s,n))},[y,N,k,a]),T=(0,d.useCallback)(e=>{var t;let{dataCategory:l,field:i}=e,o={...i,data_categories:null===(t=i.data_categories)||void 0===t?void 0:t.filter(e=>e!==l)},s=N.indexOf(y),n=y.fields.indexOf(i);a((0,b._n)(k,o,s,n))},[y,N,k,a]),O=(0,d.useCallback)(a=>{e.push({pathname:x.y1,query:{datasetId:encodeURIComponent(t),collectionName:encodeURIComponent(_),subfieldNames:encodeURIComponent(a.name)}})},[t,e,_]),E=(0,d.useMemo)(()=>[w.accessor(e=>e.name,{id:"name",cell:e=>{var a;let t=e.row.original.fields&&(null===(a=e.row.original.fields)||void 0===a?void 0:a.length)>0;return(0,l.jsx)(f.G3,{fontWeight:t?"semibold":"normal",value:e.getValue()})},header:e=>(0,l.jsx)(f.Rr,{value:"Field Name",...e}),size:180}),w.accessor(e=>{var a;return null===(a=e.fides_meta)||void 0===a?void 0:a.data_type},{id:"type",cell:e=>e.getValue()?(0,l.jsx)(f.A4,{value:e.getValue()}):(0,l.jsx)(f.G3,{value:void 0}),header:e=>(0,l.jsx)(f.Rr,{value:"Type",...e}),size:80}),w.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(f.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(f.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),w.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{var a;let t=e.row.original;return!(e.row.original.fields&&(null===(a=e.row.original.fields)||void 0===a?void 0:a.length)>0)&&(0,l.jsx)(h.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>S({dataCategory:e,field:t}),onRemoveTaxonomy:e=>T({dataCategory:e,field:t})})},header:e=>(0,l.jsx)(f.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),w.display({id:"actions",header:"Actions",cell:e=>{let{row:a}=e,t=a.original;return(0,l.jsx)(s.Ugi,{spacing:0,"data-testid":"field-".concat(t.name),children:(0,l.jsx)(s.wpx,{size:"small",icon:(0,l.jsx)(s.dY8,{}),onClick:()=>{W(t),A(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[S,T]),U=(0,d.useMemo)(()=>M?I.filter(e=>e.name.toLowerCase().includes(M.toLowerCase())):I,[I,M]),V=(0,o.b7)({getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),columns:E,data:U,columnResizeMode:"onChange"}),[Z,A]=(0,d.useState)(!1),[G,W]=(0,d.useState)(),q=(0,d.useMemo)(()=>[{title:"All datasets",icon:(0,l.jsx)(r.V,{boxSize:4}),link:x.$m},{title:t,link:{pathname:x.o5,query:{datasetId:t}},icon:(0,l.jsx)(c.l,{boxSize:5})},{title:_,icon:(0,l.jsx)(u.$,{boxSize:5})}],[t,_]);return(0,l.jsxs)(m.Z,{title:"Dataset - ".concat(t),mainProps:{paddingTop:0},children:[(0,l.jsx)(g.Z,{breadcrumbs:[{title:"Datasets"}],children:(0,l.jsx)(p.Z,{breadcrumbs:q})}),R?(0,l.jsx)(f.I4,{rowHeight:36,numRows:15}):(0,l.jsxs)(s.xuv,{"data-testid":"fields-table",children:[(0,l.jsx)(f.Q$,{children:(0,l.jsx)(f.HO,{globalFilter:M,setGlobalFilter:z,placeholder:"Search",testid:"fields-search"})}),(0,l.jsx)(f.ZK,{tableInstance:V,emptyTableNotice:(0,l.jsx)(C,{}),onRowClick:O,getRowIsClickable:e=>{var a;return!!(e.fields&&(null===(a=e.fields)||void 0===a?void 0:a.length)>0)}}),(0,l.jsx)(j.Z,{isOpen:Z,onClose:()=>{A(!1),W(void 0)},field:G,dataset:k,collectionName:_})]})]})}}},function(e){e.O(0,[8033,6451,4554,2866,9278,1995,8540,7096,6711,2888,9774,179],function(){return e(e.s=59972)}),_N_E=e.O()}]);