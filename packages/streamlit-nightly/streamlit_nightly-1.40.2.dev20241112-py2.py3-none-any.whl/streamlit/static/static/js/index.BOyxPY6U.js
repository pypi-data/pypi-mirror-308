import{n as R,r as o,I as z,bW as b,a4 as L,j as u,aX as B,b8 as D,aY as j,aH as _,aZ as O,bY as Y}from"./index.DmAmxxKi.js";import{u as q}from"./uniqueId.Bo3xay99.js";import{a as w}from"./useBasicWidgetState.w-hfgRBv.js";import{u as A}from"./useUpdateUiValue.BXVs0McO.js";import{I as G}from"./InputInstructions.DeHbSZHX.js";import{I as K}from"./input.X2Yf-d8S.js";import"./FormClearHelper.BFgyXcKZ.js";import"./base-input.C3L2LgcV.js";const N=R("div",{target:"e6m0wlp0"})(({width:e})=>({position:"relative",width:e}));function rt({disabled:e,element:t,widgetMgr:s,width:l,fragmentId:c}){var W;const[r,p]=o.useState(y(s,t)??null),[i,m]=o.useState(!1),x=o.useCallback(()=>{p(t.default??null),m(!0)},[t.default]),[C,n]=w({getStateFromWidgetMgr:y,getDefaultStateFromProto:X,getCurrStateFromProto:Z,updateWidgetMgrState:$,element:t,widgetMgr:s,fragmentId:c,onFormCleared:x});A(C,r,p,i);const[F,g]=o.useState(!1),a=z(),[S]=o.useState(()=>q("text_input_")),{placeholder:V,formId:I}=t,d=o.useCallback(()=>{m(!1),n({value:r,fromUi:!0})},[r,n]),v=b({formId:I})?s.allowFormEnterToSubmit(I):i,k=F&&l>a.breakpoints.hideWidgetDetails,E=o.useCallback(()=>{i&&d(),g(!1)},[i,d]),P=o.useCallback(()=>{g(!0)},[]),U=o.useCallback(f=>{const{value:h}=f.target,{maxChars:T}=t;T!==0&&h.length>T||(m(!0),p(h),b(t)&&n({value:h,fromUi:!0}))},[t,n]),H=o.useCallback(f=>{f.key==="Enter"&&(i&&d(),s.allowFormEnterToSubmit(t.formId)&&s.submitForm(t.formId,c))},[t,c,i,d,s]);return L(N,{className:"stTextInput","data-testid":"stTextInput",width:l,children:[u(O,{label:t.label,disabled:e,labelVisibility:B((W=t.labelVisibility)==null?void 0:W.value),htmlFor:S,children:t.help&&u(D,{children:u(j,{content:t.help,placement:_.TOP_RIGHT})})}),u(K,{value:r??"",placeholder:V,onBlur:E,onFocus:P,onChange:U,onKeyPress:H,"aria-label":t.label,disabled:e,id:S,type:J(t),autoComplete:t.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:a.lineHeights.inputWidget,paddingRight:a.spacing.sm,paddingLeft:a.spacing.sm,paddingBottom:a.spacing.sm,paddingTop:a.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:a.sizes.minElementHeight,borderLeftWidth:a.sizes.borderWidth,borderRightWidth:a.sizes.borderWidth,borderTopWidth:a.sizes.borderWidth,borderBottomWidth:a.sizes.borderWidth}}}}),k&&u(G,{dirty:i,value:r??"",maxLength:t.maxChars,inForm:b({formId:t.formId}),allowEnterToSubmit:v})]})}function y(e,t){return e.getStringValue(t)??null}function X(e){return e.default??null}function Z(e){return e.value??null}function $(e,t,s,l){t.setStringValue(e,s.value,{fromUi:s.fromUi},l)}function J(e){return e.type===Y.Type.PASSWORD?"password":"text"}export{rt as default};
//# sourceMappingURL=index.BOyxPY6U.js.map
