import{r as a,I as B,bW as v,a4 as K,j as m,aX as j,b8 as _,aY as $,aH as q,aZ as G}from"./index.DmAmxxKi.js";import{u as N}from"./uniqueId.Bo3xay99.js";import{u as O}from"./useUpdateUiValue.BXVs0McO.js";import{I as X}from"./InputInstructions.DeHbSZHX.js";import{a as Y}from"./useBasicWidgetState.w-hfgRBv.js";import{T as Z}from"./textarea.kooyjunI.js";import"./FormClearHelper.BFgyXcKZ.js";import"./base-input.C3L2LgcV.js";const C=(o,t)=>o.getStringValue(t)??t.default??null,w=o=>o.default??null,J=o=>o.value??null,Q=(o,t,r,u)=>{t.setStringValue(o,r.value,{fromUi:r.fromUi},u)},M=({disabled:o,element:t,widgetMgr:r,fragmentId:u,width:f})=>{var x;const T=a.useRef(N("text_area_")).current,[i,h]=a.useState(!1),[F,y]=a.useState(!1),[c,b]=a.useState(C(r,t)??null),E=a.useCallback(()=>{b(t.default??null),h(!0)},[t]),[I,W]=Y({getStateFromWidgetMgr:C,getDefaultStateFromProto:w,getCurrStateFromProto:J,updateWidgetMgrState:Q,element:t,widgetMgr:r,fragmentId:u,onFormCleared:E});O(I,c,b,i);const e=B(),p=a.useCallback(({fromUi:s})=>{W({value:c,fromUi:s}),h(!1)},[c,W]),V=a.useCallback(()=>{i&&p({fromUi:!0}),y(!1)},[i,p]),k=a.useCallback(()=>{y(!0)},[]),H=a.useCallback(s=>{const{value:l}=s.target,{maxChars:n}=t;n!==0&&l.length>n||(b(l),h(!0))},[t]),U=s=>{var d;const{keyCode:l,key:n}=s;return(n==="Enter"||l===13||l===10)&&((d=s.nativeEvent)==null?void 0:d.isComposing)!==!0},z=a.useCallback(s=>{const{metaKey:l,ctrlKey:n}=s,{formId:d}=t,L=r.allowFormEnterToSubmit(d);U(s)&&(n||l)&&i&&(s.preventDefault(),p({fromUi:!0}),L&&r.submitForm(d,u))},[t,r,i,p,u]),P={width:f},{height:S,placeholder:R,formId:g}=t,A=v({formId:g})?r.allowFormEnterToSubmit(g):i,D=F&&f>e.breakpoints.hideWidgetDetails;return K("div",{className:"stTextArea","data-testid":"stTextArea",style:P,children:[m(G,{label:t.label,disabled:o,labelVisibility:j((x=t.labelVisibility)==null?void 0:x.value),htmlFor:T,children:t.help&&m(_,{children:m($,{content:t.help,placement:q.TOP_RIGHT})})}),m(Z,{value:c??"",placeholder:R,onBlur:V,onFocus:k,onChange:H,onKeyDown:z,"aria-label":t.label,disabled:o,id:T,overrides:{Input:{style:{lineHeight:e.lineHeights.inputWidget,height:S?`${S}px`:"",minHeight:e.sizes.largestElementHeight,resize:"vertical","::placeholder":{opacity:"0.7"},paddingRight:e.spacing.lg,paddingLeft:e.spacing.lg,paddingBottom:e.spacing.lg,paddingTop:e.spacing.lg}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:{borderLeftWidth:e.sizes.borderWidth,borderRightWidth:e.sizes.borderWidth,borderTopWidth:e.sizes.borderWidth,borderBottomWidth:e.sizes.borderWidth}}}}),D&&m(X,{dirty:i,value:c??"",maxLength:t.maxChars,type:"multiline",inForm:v({formId:g}),allowEnterToSubmit:A})]})},nt=a.memo(M);export{nt as default};
//# sourceMappingURL=index.CFaFCQak.js.map
