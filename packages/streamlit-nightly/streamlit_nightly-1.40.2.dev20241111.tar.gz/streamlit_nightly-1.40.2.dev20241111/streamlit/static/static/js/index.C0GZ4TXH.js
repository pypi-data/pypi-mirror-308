import{n as z,r as a,I as L,bW as g,a4 as U,j as u,aX as B,b8 as D,aY as j,aH as _,aZ as O,bY as Y}from"./index.Dvk_YMQp.js";import{u as q}from"./uniqueId.JxYSL1SQ.js";import{a as w}from"./useBasicWidgetState.B9OfR8Tg.js";import{I as A}from"./InputInstructions.BnmM3eQm.js";import{I as G}from"./input.DEelXDRT.js";import"./FormClearHelper.B2mjmq6L.js";import"./base-input.CD_9nILl.js";const K=z("div",{target:"e6m0wlp0"})(({width:e})=>({position:"relative",width:e}));function st({disabled:e,element:t,widgetMgr:s,width:l,fragmentId:d}){var T;const[r,p]=a.useState(x(s,t)??null),[i,f]=a.useState(!1),C=a.useCallback(()=>{p(t.default??null),f(!0)},[t.default]),[m,n]=w({getStateFromWidgetMgr:x,getDefaultStateFromProto:N,getCurrStateFromProto:X,updateWidgetMgrState:Z,element:t,widgetMgr:s,fragmentId:d,onFormCleared:C});a.useEffect(()=>{i||m!==r&&p(m)},[m,r,i]);const[F,S]=a.useState(!1),o=L(),[I]=a.useState(()=>q("text_input_")),{placeholder:v,formId:W}=t,c=a.useCallback(()=>{f(!1),n({value:r,fromUi:!0})},[r,n]),V=g({formId:W})?s.allowFormEnterToSubmit(W):i,E=F&&l>o.breakpoints.hideWidgetDetails,k=a.useCallback(()=>{i&&c(),S(!1)},[i,c]),P=a.useCallback(()=>{S(!0)},[]),H=a.useCallback(h=>{const{value:b}=h.target,{maxChars:y}=t;y!==0&&b.length>y||(f(!0),p(b),g(t)&&n({value:b,fromUi:!0}))},[t,n]),R=a.useCallback(h=>{h.key==="Enter"&&(i&&c(),s.allowFormEnterToSubmit(t.formId)&&s.submitForm(t.formId,d))},[t,d,i,c,s]);return U(K,{className:"stTextInput","data-testid":"stTextInput",width:l,children:[u(O,{label:t.label,disabled:e,labelVisibility:B((T=t.labelVisibility)==null?void 0:T.value),htmlFor:I,children:t.help&&u(D,{children:u(j,{content:t.help,placement:_.TOP_RIGHT})})}),u(G,{value:r??"",placeholder:v,onBlur:k,onFocus:P,onChange:H,onKeyPress:R,"aria-label":t.label,disabled:e,id:I,type:$(t),autoComplete:t.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:o.lineHeights.inputWidget,paddingRight:o.spacing.sm,paddingLeft:o.spacing.sm,paddingBottom:o.spacing.sm,paddingTop:o.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:o.sizes.minElementHeight,borderLeftWidth:o.sizes.borderWidth,borderRightWidth:o.sizes.borderWidth,borderTopWidth:o.sizes.borderWidth,borderBottomWidth:o.sizes.borderWidth}}}}),E&&u(A,{dirty:i,value:r??"",maxLength:t.maxChars,inForm:g({formId:t.formId}),allowEnterToSubmit:V})]})}function x(e,t){return e.getStringValue(t)??null}function N(e){return e.default??null}function X(e){return e.value??null}function Z(e,t,s,l){t.setStringValue(e,s.value,{fromUi:s.fromUi},l)}function $(e){return e.type===Y.Type.PASSWORD?"password":"text"}export{st as default};
//# sourceMappingURL=index.C0GZ4TXH.js.map
