import{r as s,E as $,_ as z,n as u,a0 as L,I as V,j as c,a4 as D,aU as K}from"./index.Dvk_YMQp.js";import{I as N}from"./InputInstructions.BnmM3eQm.js";import{T as _}from"./textarea.yZDJWGWv.js";import"./base-input.CD_9nILl.js";var E=s.forwardRef(function(t,e){var a={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return s.createElement($,z({iconAttrs:a,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:e}),s.createElement("rect",{width:24,height:24,fill:"none"}),s.createElement("path",{d:"M3 5.51v3.71c0 .46.31.86.76.97L11 12l-7.24 1.81c-.45.11-.76.51-.76.97v3.71c0 .72.73 1.2 1.39.92l15.42-6.49c.82-.34.82-1.5 0-1.84L4.39 4.58C3.73 4.31 3 4.79 3 5.51z"}))});E.displayName="Send";const j=u("div",{target:"e4p0gdf0"})(({theme:t,width:e})=>({borderRadius:t.radii.default,display:"flex",backgroundColor:t.colors.widgetBackgroundColor??t.colors.secondaryBg,width:`${e}px`})),A=u("div",{target:"e4p0gdf1"})(({theme:t})=>({backgroundColor:t.colors.transparent,position:"relative",flexGrow:1,borderRadius:t.radii.default,display:"flex",alignItems:"center"})),M=u("button",{target:"e4p0gdf2"})(({theme:t,disabled:e,extended:a})=>{const l=L(t),[o,g]=l?[t.colors.gray60,t.colors.gray80]:[t.colors.gray80,t.colors.gray40];return{border:"none",backgroundColor:t.colors.transparent,borderTopRightRadius:a?"0":t.radii.default,borderTopLeftRadius:a?t.radii.default:"0",borderBottomRightRadius:t.radii.default,display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:t.lineHeights.none,margin:t.spacing.none,padding:t.spacing.sm,color:e?o:g,pointerEvents:"auto","&:focus":{outline:"none"},":focus":{outline:"none"},"&:focus-visible":{backgroundColor:l?t.colors.gray10:t.colors.gray90},"&:hover":{backgroundColor:t.colors.primary,color:t.colors.white},"&:disabled, &:disabled:hover, &:disabled:active":{backgroundColor:t.colors.transparent,borderColor:t.colors.transparent,color:t.colors.gray}}}),U=u("div",{target:"e4p0gdf3"})({display:"flex",alignItems:"flex-end",height:"100%",position:"absolute",right:0,pointerEvents:"none"}),F=u("div",{target:"e4p0gdf4"})(({theme:t})=>({position:"absolute",bottom:"0px",right:`calc(${t.iconSizes.xl} + 2 * ${t.spacing.sm} + ${t.spacing.sm})`})),G=6.5,H=1,O=t=>{var l;const{keyCode:e,key:a}=t;return(a==="Enter"||e===13||e===10)&&((l=t.nativeEvent)==null?void 0:l.isComposing)!==!0};function Y({width:t,element:e,widgetMgr:a,fragmentId:l}){const o=V(),[g,h]=s.useState(!1),[p,f]=s.useState(e.default),[b,C]=s.useState(0),i=s.useRef(null),y=s.useRef({minHeight:0,maxHeight:0}),R=()=>{let r=0;const{current:n}=i;if(n){const d=n.placeholder;n.placeholder="",n.style.height="auto",r=n.scrollHeight,n.placeholder=d,n.style.height=""}return r},x=()=>{i.current&&i.current.focus(),p&&(a.setStringTriggerValue(e,p,{fromUi:!0},l),h(!1),f(""),C(0))},k=r=>{const{metaKey:n,ctrlKey:d,shiftKey:W}=r;O(r)&&!W&&!d&&!n&&(r.preventDefault(),x())},w=r=>{const{value:n}=r.target,{maxChars:d}=e;d!==0&&n.length>d||(h(n!==""),f(n),C(R()))};s.useEffect(()=>{if(e.setValue){e.setValue=!1;const r=e.value||"";f(r),h(r!=="")}},[e]),s.useEffect(()=>{if(i.current){const{offsetHeight:r}=i.current;y.current.minHeight=r,y.current.maxHeight=r*G}},[i]);const{disabled:I,placeholder:m,maxChars:B}=e,{minHeight:T,maxHeight:S}=y.current,v=b>0&&i.current?Math.abs(b-T)>H:!1;return c(j,{className:"stChatInput","data-testid":"stChatInput",width:t,children:D(A,{children:[c(_,{inputRef:i,value:p,placeholder:m,onChange:w,onKeyDown:k,"aria-label":m,disabled:I,rows:1,overrides:{Root:{style:{minHeight:o.sizes.minElementHeight,outline:"none",backgroundColor:o.colors.transparent,borderLeftWidth:o.sizes.borderWidth,borderRightWidth:o.sizes.borderWidth,borderTopWidth:o.sizes.borderWidth,borderBottomWidth:o.sizes.borderWidth,width:`${t}px`}},InputContainer:{style:{backgroundColor:o.colors.transparent}},Input:{props:{"data-testid":"stChatInputTextArea"},style:{lineHeight:o.lineHeights.inputWidget,backgroundColor:o.colors.transparent,"::placeholder":{opacity:"0.7"},height:v?`${b+H}px`:"auto",maxHeight:S?`${S}px`:"none",paddingLeft:o.spacing.sm,paddingBottom:o.spacing.sm,paddingTop:o.spacing.sm,paddingRight:`calc(${o.iconSizes.xl} + 2 * ${o.spacing.sm} + ${o.spacing.sm})`}}}}),t>o.breakpoints.hideWidgetDetails&&c(F,{children:c(N,{dirty:g,value:p,maxLength:B,type:"chat",inForm:!1})}),c(U,{children:c(M,{onClick:x,disabled:!g||I,extended:v,"data-testid":"stChatInputSubmitButton",children:c(K,{content:E,size:"xl",color:"inherit"})})})]})})}export{Y as default};
//# sourceMappingURL=index.a7xjNw3X.js.map
