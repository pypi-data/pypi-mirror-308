import{r as n,aO as b,j as f}from"./index.Dvk_YMQp.js";const E=528;function A({element:r,width:d,endpoints:m,elementMgr:p}){const i=n.useRef(null),{type:T,url:l,startTime:s,subtitles:v,endTime:u,loop:c,autoplay:h,muted:L}=r,N=n.useMemo(()=>{if(!r.id)return!0;const e=p.getElementState(r.id,"preventAutoplay");return e||p.setElementState(r.id,"preventAutoplay",!0),e??!1},[r.id,p]);n.useEffect(()=>{i.current&&(i.current.currentTime=s)},[s]),n.useEffect(()=>{const e=i.current,t=()=>{e&&(e.currentTime=r.startTime)};return e&&e.addEventListener("loadedmetadata",t),()=>{e&&e.removeEventListener("loadedmetadata",t)}},[r]),n.useEffect(()=>{const e=i.current;if(!e)return;let t=!1;const o=()=>{u>0&&e.currentTime>=u&&(c?(e.currentTime=s||0,e.play()):t||(t=!0,e.pause()))};return u>0&&e.addEventListener("timeupdate",o),()=>{e&&u>0&&e.removeEventListener("timeupdate",o)}},[u,c,s]),n.useEffect(()=>{const e=i.current;if(!e)return;const t=()=>{c&&(e.currentTime=s||0,e.play())};return e.addEventListener("ended",t),()=>{e&&e.removeEventListener("ended",t)}},[c,s]);const S=e=>{const{startTime:t,endTime:o,loop:U,autoplay:P,muted:V}=r,a=new URL(e);if(t&&!isNaN(t)&&a.searchParams.append("start",t.toString()),o&&!isNaN(o)&&a.searchParams.append("end",o.toString()),U){a.searchParams.append("loop","1");const y=a.pathname.split("/").pop();y&&a.searchParams.append("playlist",y)}return P&&a.searchParams.append("autoplay","1"),V&&a.searchParams.append("mute","1"),a.toString()};if(T===b.Type.YOUTUBE_IFRAME){const e=d!==0?d*.75:E;return f("iframe",{className:"stVideo","data-testid":"stVideo",title:l,src:S(l),width:d,height:e,style:{colorScheme:"normal"},frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0})}return f("video",{className:"stVideo","data-testid":"stVideo",ref:i,controls:!0,muted:L,autoPlay:h&&!N,src:m.buildMediaURL(l),style:{width:d,height:d===0?E:void 0},crossOrigin:void 0,children:v&&v.map((e,t)=>f("track",{kind:"captions",src:m.buildMediaURL(`${e.url}`),label:`${e.label}`,default:t===0},t))})}export{A as default};
//# sourceMappingURL=index.Trgl1nBJ.js.map
