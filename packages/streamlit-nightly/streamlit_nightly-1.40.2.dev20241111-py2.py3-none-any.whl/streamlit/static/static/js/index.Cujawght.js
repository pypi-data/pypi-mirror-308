import{r as e,I as B,bW as C,a4 as K,j as m,aX as j,b8 as _,aY as $,aH as q,aZ as G}from"./index.Dvk_YMQp.js";import{u as N}from"./uniqueId.JxYSL1SQ.js";import{I as O}from"./InputInstructions.BnmM3eQm.js";import{a as X}from"./useBasicWidgetState.B9OfR8Tg.js";import{T as Y}from"./textarea.yZDJWGWv.js";import"./FormClearHelper.B2mjmq6L.js";import"./base-input.CD_9nILl.js";const F=(o,t)=>o.getStringValue(t)??t.default??null,Z=o=>o.default??null,w=o=>o.value??null,J=(o,t,r,c)=>{t.setStringValue(o,r.value,{fromUi:r.fromUi},c)},Q=({disabled:o,element:t,widgetMgr:r,fragmentId:c,width:T})=>{var v;const y=e.useRef(N("text_area_")).current,[i,h]=e.useState(!1),[E,W]=e.useState(!1),[n,b]=e.useState(F(r,t)??null),I=e.useCallback(()=>{b(t.default??null),h(!0)},[t]),[f,S]=X({getStateFromWidgetMgr:F,getDefaultStateFromProto:Z,getCurrStateFromProto:w,updateWidgetMgrState:J,element:t,widgetMgr:r,fragmentId:c,onFormCleared:I});e.useEffect(()=>{i||f!==n&&b(f)},[f,n,i]);const a=B(),p=e.useCallback(({fromUi:s})=>{S({value:n,fromUi:s}),h(!1)},[n,S]),V=e.useCallback(()=>{i&&p({fromUi:!0}),W(!1)},[i,p]),k=e.useCallback(()=>{W(!0)},[]),H=e.useCallback(s=>{const{value:l}=s.target,{maxChars:u}=t;u!==0&&l.length>u||(b(l),h(!0))},[t]),z=s=>{var d;const{keyCode:l,key:u}=s;return(u==="Enter"||l===13||l===10)&&((d=s.nativeEvent)==null?void 0:d.isComposing)!==!0},P=e.useCallback(s=>{const{metaKey:l,ctrlKey:u}=s,{formId:d}=t,U=r.allowFormEnterToSubmit(d);z(s)&&(u||l)&&i&&(s.preventDefault(),p({fromUi:!0}),U&&r.submitForm(d,c))},[t,r,i,p,c]),R={width:T},{height:x,placeholder:A,formId:g}=t,D=C({formId:g})?r.allowFormEnterToSubmit(g):i,L=E&&T>a.breakpoints.hideWidgetDetails;return K("div",{className:"stTextArea","data-testid":"stTextArea",style:R,children:[m(G,{label:t.label,disabled:o,labelVisibility:j((v=t.labelVisibility)==null?void 0:v.value),htmlFor:y,children:t.help&&m(_,{children:m($,{content:t.help,placement:q.TOP_RIGHT})})}),m(Y,{value:n??"",placeholder:A,onBlur:V,onFocus:k,onChange:H,onKeyDown:P,"aria-label":t.label,disabled:o,id:y,overrides:{Input:{style:{lineHeight:a.lineHeights.inputWidget,height:x?`${x}px`:"",minHeight:a.sizes.largestElementHeight,resize:"vertical","::placeholder":{opacity:"0.7"},paddingRight:a.spacing.lg,paddingLeft:a.spacing.lg,paddingBottom:a.spacing.lg,paddingTop:a.spacing.lg}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:{borderLeftWidth:a.sizes.borderWidth,borderRightWidth:a.sizes.borderWidth,borderTopWidth:a.sizes.borderWidth,borderBottomWidth:a.sizes.borderWidth}}}}),L&&m(O,{dirty:i,value:n??"",maxLength:t.maxChars,type:"multiline",inForm:C({formId:g}),allowEnterToSubmit:D})]})},it=e.memo(Q);export{it as default};
//# sourceMappingURL=index.Cujawght.js.map
