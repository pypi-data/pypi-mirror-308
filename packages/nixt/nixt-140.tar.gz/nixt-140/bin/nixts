#!/usr/bin/env python3
# This file is placed in the Public Domain.
# pylint: disable=C,W0105


"service"


from nixt.command import NAME, forever, privileges, scanner, wrap
from nixt.persist import pidfile, pidname
from nixt.runtime import errors


def wrapped():
    wrap(main)
    for text in errors():
        print(text)


def main():
    privileges()
    pidfile(pidname(NAME))
    if "m" in cfg.opts and os.path.exists("examples"):
        import examples.face as MODS
        MODS.rss.DEBUG = True
    else:
        MODS = None
    scanner(MODS, init=True)
    forever()


if __name__ == "__main__":
    wrap(main)
    for txt in errors():
        print(txt)
