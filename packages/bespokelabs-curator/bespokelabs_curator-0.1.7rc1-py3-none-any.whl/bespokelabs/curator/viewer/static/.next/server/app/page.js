(()=>{var e={};e.id=931,e.ids=[931],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},51903:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=r(49442),s=r(10042),o=r(48190),l=r.n(o),n=r(63289),i={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(t,i);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,23068)),"/home/charlieji/workspace/bella/bespoke-dataset-viewer/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,44486)),"/home/charlieji/workspace/bella/bespoke-dataset-viewer/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/charlieji/workspace/bella/bespoke-dataset-viewer/app/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},60097:(e,t,r)=>{Promise.resolve().then(r.bind(r,23068))},92530:(e,t,r)=>{Promise.resolve().then(r.bind(r,14407))},14407:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(20149),s=r(63606),o=r(4619),l=r(3271),n=r(80304),i=r(52851),d=r(24219),c=r(3130);let u=(0,r(88147).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),p=[{key:"created_time",label:"Created"},{key:"last_edited_time",label:"Last Updated"},{key:"model_name",label:"Model"},{key:"prompt_func",label:"Prompter Function"},{key:"response_format",label:"Response Format"}];function m(){let[e,t]=(0,s.useState)([]),[r,m]=(0,s.useState)(!0),[h,x]=(0,s.useState)(null),[f,g]=(0,s.useState)(!0),[w,y]=(0,s.useState)(null),[b,v]=(0,s.useState)(new Set),j=(0,o.useRouter)(),{toast:k}=(0,n.pm)(),[_,N]=(0,s.useState)(null);return((0,s.useCallback)(async(e=!1)=>{try{let r=w&&!e?`?lastCreatedTime=${w}`:"",a=await fetch(`/api/runs${r}`),s=await a.json();if(404===a.status&&"NO_CACHE_DB"===s.error){N({message:s.message,path:s.path}),g(!1),m(!1);return}if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);if(!Array.isArray(s))throw Error("Data is not in the expected format");if(s.length>0){if(e)t(s),y(s[0].created_time);else if(s.length>0){let e=new Set(s.map(e=>e.run_hash));v(e),t(e=>[...s,...e]),y(s[0].created_time),k({title:"New runs available",description:`${s.length} new runs added`}),setTimeout(()=>{v(new Set)},5e3)}}}catch(e){console.error("Failed to fetch runs:",e),x(e instanceof Error?e.message:"Failed to fetch runs"),k({variant:"destructive",title:"Error",description:"Failed to fetch new runs"})}finally{m(!1)}},[w,k]),h)?(0,a.jsxs)("div",{children:["Error: ",h]}):(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground overflow-x-hidden",children:[(0,a.jsx)(c.h,{isLoading:r,isPolling:f,onTogglePolling:()=>g(e=>!e),pollingText:"Polling for updates...",loadingText:"Loading runs..."}),(0,a.jsxs)("main",{className:"container mx-auto p-4",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-foreground",children:"Curator Runs History"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"View and analyze your past Bespoke Curator runs"})]}),_?(0,a.jsx)("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 dark:border-yellow-900/50 dark:bg-yellow-900/20 p-4 my-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(u,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-yellow-600 dark:text-yellow-500",children:"No Cache Database Found"}),(0,a.jsx)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:_.message}),(0,a.jsxs)("p",{className:"text-xs text-yellow-500 dark:text-yellow-400 mt-2 font-mono",children:["Expected location: ",_.path]})]})]})}):r?(0,a.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading runs..."})]})}):0===e.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No runs found"})}):(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(l.d,{columns:p,data:e,getRowKey:e=>e.id,getCellContent:(e,t)=>{switch(t){case"created_time":return new Date(e.created_time).toLocaleString();case"last_edited_time":return"-"===e.last_edited_time?"-":new Date(e.last_edited_time).toLocaleString();default:return e[t]}},onRowClick:e=>j.push(`/dataset/${e.run_hash}`),truncateConfig:{enabled:!0,maxLength:100},pageSize:10,rowProps:e=>({className:(0,d.cn)(b.has(e.id)&&"bg-success/30 animate-highlight","transition-colors duration-300")})})})]})]})}function h(){return(0,a.jsx)(m,{})}},23068:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/charlieji/workspace/bella/bespoke-dataset-viewer/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/charlieji/workspace/bella/bespoke-dataset-viewer/app/page.tsx","default")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[492,146,371,83],()=>r(51903));module.exports=a})();