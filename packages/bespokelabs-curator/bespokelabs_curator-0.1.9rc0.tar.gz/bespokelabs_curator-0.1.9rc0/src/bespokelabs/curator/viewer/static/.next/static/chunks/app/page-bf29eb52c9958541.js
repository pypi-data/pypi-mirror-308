(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{71830:(e,t,a)=>{Promise.resolve().then(a.bind(a,87656))},87656:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(57437),r=a(2265),n=a(16463),l=a(92694),o=a(35657),i=a(3274),c=a(37440),d=a(89669),m=a(76780),u=a(68773),h=a.n(u);a(883),a(98734);var x=a(50495),p=a(22468),g=a(6884);let f=e=>{let{code:t}=e,[a,n]=r.useState(!1);r.useEffect(()=>{h().highlightAll()},[t]);let l=async()=>{await navigator.clipboard.writeText(t),n(!0),setTimeout(()=>n(!1),2e3)};return(0,s.jsxs)("div",{className:"relative rounded-lg overflow-x-auto",children:[(0,s.jsx)("div",{className:"absolute right-2 top-2",children:(0,s.jsx)(x.z,{size:"icon",variant:"ghost",className:"h-8 w-8 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",onClick:l,children:a?(0,s.jsx)(p.Z,{className:"h-4 w-4"}):(0,s.jsx)(g.Z,{className:"h-4 w-4"})})}),(0,s.jsx)("pre",{className:"text-sm bg-gray-900 p-4 m-0",children:(0,s.jsx)("code",{className:"language-python",children:t})})]})},y=[{key:"created_time",label:"Created"},{key:"last_edited_time",label:"Last Updated"},{key:"model_name",label:"Model"},{key:"prompt_func",label:"Prompter Function"},{key:"response_format",label:"Response Format"}];function w(){let[e,t]=(0,r.useState)([]),[a,u]=(0,r.useState)(!0),[h,x]=(0,r.useState)(null),[p,g]=(0,r.useState)(!0),[w,j]=(0,r.useState)(null),[N,b]=(0,r.useState)(new Set),v=(0,n.useRouter)(),{toast:_}=(0,o.pm)(),[k,C]=(0,r.useState)(null),E=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let a=w&&!e?"?lastCreatedTime=".concat(w):"",s=await fetch("/api/runs".concat(a)),r=await s.json();if(404===s.status&&"NO_CACHE_DB"===r.error){C({message:r.message,path:r.path}),g(!1),u(!1);return}if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));if(!Array.isArray(r))throw Error("Data is not in the expected format");if(r.length>0){if(e)t(r),j(r[0].created_time);else if(r.length>0){let e=new Set(r.map(e=>e.run_hash));b(e),t(e=>[...r,...e]),j(r[0].created_time),_({title:"New runs available",description:"".concat(r.length," new runs added")}),setTimeout(()=>{b(new Set)},5e3)}}}catch(e){console.error("Failed to fetch runs:",e),x(e instanceof Error?e.message:"Failed to fetch runs"),_({variant:"destructive",title:"Error",description:"Failed to fetch new runs"})}finally{u(!1)}},[w,_]);return((0,r.useEffect)(()=>{E(!0)},[E]),(0,r.useEffect)(()=>{if(!p)return;let e=setInterval(()=>{E(!1)},5e3);return()=>clearInterval(e)},[p,E]),h)?(0,s.jsxs)("div",{children:["Error: ",h]}):(0,s.jsxs)("div",{className:"min-h-screen bg-background text-foreground overflow-x-hidden",children:[(0,s.jsx)(d.h,{isLoading:a,isPolling:p,onTogglePolling:()=>g(e=>!e),pollingText:"Polling for updates...",loadingText:"Loading runs..."}),(0,s.jsxs)("main",{className:"container mx-auto p-4",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-foreground",children:"Curator Runs History"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"View and analyze your past Bespoke Curator runs"})]}),k?(0,s.jsx)("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 dark:border-yellow-900/50 dark:bg-yellow-900/20 p-4 my-4",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-500 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-yellow-600 dark:text-yellow-500",children:"No Cache Database Found"}),(0,s.jsx)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:k.message}),(0,s.jsxs)("p",{className:"text-xs text-yellow-500 dark:text-yellow-400 mt-2 font-mono",children:["Expected location: ",k.path]})]})]}),(0,s.jsxs)("div",{className:"mt-4 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-yellow-400 mb-2",children:"Try running this example to create your first curator run:"}),(0,s.jsx)(f,{code:'from bespokelabs import curator\nimport os\n\n# Set your OpenAI API key here\nos.environ[\'OPENAI_API_KEY\'] = \'sk-...\'\n\n# Create a prompter instance\npoet = curator.Prompter(\n    prompt_func=lambda: {\n        "user_prompt": "Write a poem about the beauty of computer science"\n    },\n    model_name="gpt-4o-mini",\n)\n\n# Generate and print the poem\npoem = poet()\nprint(poem.to_list()[0])'})]})]})}):a?(0,s.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(i.Z,{className:"h-8 w-8 animate-spin"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading runs..."})]})}):0===e.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No runs found"})}):(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(l.d,{columns:y,data:e,getRowKey:e=>e.id,getCellContent:(e,t)=>{switch(t){case"created_time":return new Date(e.created_time).toLocaleString();case"last_edited_time":return"-"===e.last_edited_time?"-":new Date(e.last_edited_time).toLocaleString();default:return e[t]}},onRowClick:e=>v.push("/dataset/".concat(e.run_hash,"?batchMode=").concat(e.batch_mode)),truncateConfig:{enabled:!0,maxLength:100},pageSize:10,rowProps:e=>({className:(0,c.cn)(N.has(e.id)&&"bg-success/30 animate-highlight","transition-colors duration-300")})})})]})]})}function j(){return(0,s.jsx)(w,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[313,237,832,883,130,215,744],()=>t(71830)),_N_E=e.O()}]);