function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderEmbeddedCodeEditor-DAG0asX-.js","./toggleHighContrast-BjSyHUoH.js","./index-Bx-Up0aV.js","./index-BO8QZIze.css","./toggleHighContrast-DZe_BnT2.css","./BuilderEmbeddedCodeEditor-DfQG1Jha.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{marked as ht}from"./marked.esm-273vDTCT.js";import{d as X,i as W,a as P,c as F,r as O,ag as Le,L as A,o as f,e as b,f as n,F as U,s as J,t as L,J as C,b as V,n as ee,l as re,q as ie,ah as ft,ai as _t,y as ne,z as oe,N as se,_ as G,x as j,$ as mt,P as ue,K as ve,k as fe,aj as me,m as z,w as et,ak as ze,u as yt,v as ge,al as Ue,C as tt,am as gt,W as Ce,an as kt,a1 as bt,ao as $t,S as xt,I as It,a4 as ce,a3 as Z}from"./index-Bx-Up0aV.js";import{e as St}from"./toggleHighContrast-BjSyHUoH.js";import{B as Me}from"./BuilderApp-BU9_bVUH.js";import{p as Ct}from"./instancePath-BsbOTTI8.js";const ae=t=>(ne("data-v-4f2dcc36"),t=t(),oe(),t),wt={key:0,class:"BuilderSettingsHandlers"},Et=ae(()=>n("div",{class:"sectionTitle"},[n("i",{class:"material-symbols-outlined"},"bolt"),n("h3",null,"Events")],-1)),Mt={class:"list"},At={class:"columns"},Bt={class:"fieldWrapperMain"},Ft={class:"name"},Tt=["value","onInput"],Rt=["selected"],Ot=["value"],Lt=["value"],Nt=["value"],Wt=["value"],Pt={class:"fieldActions"},Vt=["onClick"],jt=ae(()=>n("i",{class:"material-symbols-outlined"},"help",-1)),Kt=[jt],Ht={key:0,class:"desc"},Dt=ae(()=>n("div",{class:"stubMessage"}," You can use the following stub code as a starting point for your event handler. ",-1)),Yt={class:"codeContainer"},zt=ae(()=>n("i",{class:"material-symbols-outlined"}," content_copy ",-1)),Ut={class:"customHandler"},Xt=ae(()=>n("i",{class:"material-symbols-outlined"},"add",-1)),Gt={class:"customHandlerModalForm"},Jt={class:"fieldWrapper"},Qt={class:"fieldWrapperMain"},qt=ae(()=>n("span",{class:"name"},"Event type",-1)),Zt={id:"commonEventTypes"},es=["value"],ts=ae(()=>n("span",{class:"desc"},"Can be any event type.",-1)),ss={class:"fieldWrapper"},ns=ae(()=>n("div",{class:"fieldWrapperMain"},[n("span",{class:"name"},"Handler function")],-1)),os=["value"],ls=["value"],is=["value"],as=ae(()=>n("span",{class:"desc"},"The function that will handle the event.",-1)),cs=ae(()=>n("i",{class:"material-symbols-outlined"},"add",-1)),rs=X({__name:"BuilderSettingsHandlers",setup(t){const e=W(P.core),o=W(P.builderManager),{setHandlerValue:l}=se(e,o),s=F(()=>e.getComponentById(o.getSelectedId())),u=F(()=>{const{type:$}=s.value,{events:g}=e.getComponentDefinition($),k={...g};return Object.keys({...s.value.handlers}).forEach(r=>{k[r]||(k[r]={desc:"Custom event"})}),k}),i=e.userFunctions,a=F(()=>e.getComponents("root").filter(k=>k.type=="page").map(k=>k.content.key).filter(k=>!!k)),d=F(()=>e.getComponents("workflows_root").filter(k=>k.type=="workflows_workflow").map(k=>k.content.key).filter(k=>!!k)),m=$=>{var k;const g=(k=s.value.handlers)==null?void 0:k[$];return!(!g||g.startsWith("$")||i.value.some(r=>r.name==g))},h=($,g)=>{const k=$.target.value;l(s.value.id,g,k)},p=O(null),c=O(null);function _(){return`
# When dealing with a DOM event, Writer Framework generates a payload by serialising its
# primitive properties (non-Object, non-function properties).

# If the event is instead an instance of CustomEvent,
# it looks for a "payload" property inside the CustomEvent's "detail" property. 

def handle_keydown(state, payload):
	print(payload) # Shows all the properties captured

	key_activated = payload.get("key")
	if key_activated == "ArrowLeft":
		state["position"] += -10
	elif key_activated == "ArrowRight":
		state["position"] += 10

	`}function E($){const{type:g}=s.value,{events:k}=e.getComponentDefinition(g),r=k==null?void 0:k[$];return r?r==null?void 0:r.stub:_()}async function I($){const g=E($),k=await St.colorize(g.trim(),"python",{});p.value={modalTitle:`"${$}" event`,code:g,highlightedCodeHtml:k}}const N=["click","mousedown","mouseup","mouseenter","mouseleave","mousemove","keydown","keyup","keypress","input","change","submit","focus","blur","resize","scroll","load"];function B(){const{eventType:$,handlerFunctionName:g}=c.value;l(s.value.id,$,g),c.value=null}const x={desc:"Close",fn:()=>{p.value=null}};function M(){c.value={eventType:null,handlerFunctionName:null}}const w={desc:"Close",fn:()=>{c.value=null}},S=$=>{navigator.clipboard.writeText($)};return($,g)=>{var r;const k=Le("dompurify-html");return A(o).isSelectionActive()?(f(),b("div",wt,[Et,n("div",Mt,[(f(!0),b(U,null,J(u.value,(v,y)=>{var R,K,H,D;return f(),b("div",{key:y,class:"fieldWrapper"},[n("div",At,[n("div",Bt,[n("span",Ft,L(y),1),n("select",{class:"content",value:(R=s.value.handlers)==null?void 0:R[y],onInput:Y=>h(Y,y)},[n("option",{key:"No handler",value:"",selected:!((K=s.value.handlers)!=null&&K[y])}," (No handler) ",8,Rt),(f(!0),b(U,null,J(A(i),Y=>(f(),b("option",{key:Y.name,value:Y.name},L(Y.name),9,Ot))),128)),(f(!0),b(U,null,J(a.value,Y=>(f(),b("option",{key:`$goToPage_${Y}`,value:`$goToPage_${Y}`},' Go to page "'+L(Y)+'" ',9,Lt))),128)),(f(!0),b(U,null,J(d.value,Y=>(f(),b("option",{key:`$runWorkflow_${Y}`,value:`$runWorkflow_${Y}`},' Run workflow "'+L(Y)+'" ',9,Nt))),128)),m(y)?(f(),b("option",{key:0,value:(H=s.value.handlers)==null?void 0:H[y]},L((D=s.value.handlers)==null?void 0:D[y])+" (Not Found) ",9,Wt)):C("",!0)],40,Tt)]),n("div",Pt,[E(y)?(f(),b("button",{key:0,variant:"subtle",title:"Show event handler stub",onClick:Y=>I(y)},Kt,8,Vt)):C("",!0)])]),v!=null&&v.desc?(f(),b("div",Ht,L(v.desc),1)):C("",!0)])}),128))]),p.value?(f(),V(Me,{key:0,"close-action":x,icon:"help","modal-title":(r=p.value)==null?void 0:r.modalTitle},{default:ee(()=>[Dt,n("div",Yt,[re(n("code",null,null,512),[[k,p.value.highlightedCodeHtml]])]),n("button",{onClick:g[0]||(g[0]=v=>S(p.value.code))},[zt,ie(" Copy code to clipboard ")])]),_:1},8,["modal-title"])):C("",!0),n("div",Ut,[n("button",{title:"Add a custom event handler",onClick:M},[Xt,ie("Add custom handler ")]),c.value?(f(),V(Me,{key:0,"close-action":w,icon:"bolt","modal-title":"Add Custom Event Handler"},{default:ee(()=>[n("div",Gt,[n("div",Jt,[n("div",Qt,[qt,re(n("input",{"onUpdate:modelValue":g[1]||(g[1]=v=>c.value.eventType=v),class:"content",type:"text",list:"commonEventTypes"},null,512),[[ft,c.value.eventType]]),n("datalist",Zt,[(f(),b(U,null,J(N,v=>n("option",{key:v,value:v},L(v),9,es)),64))])]),ts]),n("div",ss,[ns,re(n("select",{"onUpdate:modelValue":g[2]||(g[2]=v=>c.value.handlerFunctionName=v),class:"content"},[(f(!0),b(U,null,J(A(i),v=>(f(),b("option",{key:v.name,value:v.name},L(v.name),9,os))),128)),(f(!0),b(U,null,J(a.value,v=>(f(),b("option",{key:`$goToPage_${v}`,value:`$goToPage_${v}`},' Go to page "'+L(v)+'" ',9,ls))),128)),(f(!0),b(U,null,J(d.value,v=>(f(),b("option",{key:`$runWorkflow_${v}`,value:`$runWorkflow_${v}`},' Run workflow "'+L(v)+'" ',9,is))),128))],512),[[_t,c.value.handlerFunctionName]]),as])]),n("button",{onClick:g[3]||(g[3]=v=>B())},[cs,ie("Add ")])]),_:1})):C("",!0)])])):C("",!0)}}}),us=G(rs,[["__scopeId","data-v-4f2dcc36"]]),ds=t=>(ne("data-v-73816807"),t=t(),oe(),t),vs={class:"selectTrigger"},ps={class:"selectContent"},hs={key:0,class:"flexRow"},fs={class:"material-symbols-outlined"},_s=ds(()=>n("div",{class:"selectArrow"},[n("i",{class:"material-symbols-outlined"},"expand_more")],-1)),ms={class:"selectOptions"},ys=["data-value"],gs={class:"flexRow"},ks={class:"material-symbols-outlined"},bs=X({__name:"BuilderSelect",props:{options:{},defaultValue:{},defaultIcon:{}},emits:["select"],setup(t,{emit:e}){const o=O(null),l=t;let s=O(l.defaultValue);const u=F(()=>{const p=l.options.find(c=>c.value==s.value);return p?p.label:""}),i=F(()=>{const p=l.defaultIcon?l.defaultIcon:"help_center",c=l.options.find(_=>_.value==s.value);return c&&c.icon?c.icon:p}),a=e;let d=F(()=>l.options.map(c=>{let _={...c,class:""};return _.value==s.value?(_.class="selected",_.icon=_.icon?_.icon:"help_center"):(_.class="",_.icon=_.icon?_.icon:"help_center"),_}));const m=()=>{o.value.classList.toggle("open")},h=p=>{const c=p.currentTarget.getAttribute("data-value");s.value=c,a("select",c)};return(p,c)=>(f(),b("div",{class:"selectWrapper",onClick:m},[n("div",{ref_key:"selectEl",ref:o,class:"select"},[n("div",vs,[n("div",ps,[u.value!=null?(f(),b("div",hs,[n("div",null,[n("i",fs,L(i.value),1)]),n("div",null,L(u.value),1)])):C("",!0)]),_s]),n("div",ms,[(f(!0),b(U,null,J(A(d),_=>(f(),b("div",{key:_.value,class:j(["selectOption",_.class]),"data-value":_.value,onClick:h},[n("div",gs,[n("div",null,[n("i",ks,L(_.icon),1)]),n("div",null,L(_.label),1)])],10,ys))),128))])],512)]))}}),Ne=G(bs,[["__scopeId","data-v-73816807"]]);function de(t){return Array.isArray?Array.isArray(t):ot(t)==="[object Array]"}const $s=1/0;function xs(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-$s?"-0":e}function Is(t){return t==null?"":xs(t)}function le(t){return typeof t=="string"}function st(t){return typeof t=="number"}function Ss(t){return t===!0||t===!1||Cs(t)&&ot(t)=="[object Boolean]"}function nt(t){return typeof t=="object"}function Cs(t){return nt(t)&&t!==null}function q(t){return t!=null}function we(t){return!t.trim().length}function ot(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ws="Incorrect 'index' type",Es=t=>`Invalid value for key ${t}`,Ms=t=>`Pattern length exceeds max of ${t}.`,As=t=>`Missing ${t} property in key`,Bs=t=>`Property 'weight' in key '${t}' must be a positive integer`,Xe=Object.prototype.hasOwnProperty;class Fs{constructor(e){this._keys=[],this._keyMap={};let o=0;e.forEach(l=>{let s=lt(l);this._keys.push(s),this._keyMap[s.id]=s,o+=s.weight}),this._keys.forEach(l=>{l.weight/=o})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function lt(t){let e=null,o=null,l=null,s=1,u=null;if(le(t)||de(t))l=t,e=Ge(t),o=Ae(t);else{if(!Xe.call(t,"name"))throw new Error(As("name"));const i=t.name;if(l=i,Xe.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(Bs(i));e=Ge(i),o=Ae(i),u=t.getFn}return{path:e,id:o,weight:s,src:l,getFn:u}}function Ge(t){return de(t)?t:t.split(".")}function Ae(t){return de(t)?t.join("."):t}function Ts(t,e){let o=[],l=!1;const s=(u,i,a)=>{if(q(u))if(!i[a])o.push(u);else{let d=i[a];const m=u[d];if(!q(m))return;if(a===i.length-1&&(le(m)||st(m)||Ss(m)))o.push(Is(m));else if(de(m)){l=!0;for(let h=0,p=m.length;h<p;h+=1)s(m[h],i,a+1)}else i.length&&s(m,i,a+1)}};return s(t,le(e)?e.split("."):e,0),l?o:o[0]}const Rs={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Os={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Ls={location:0,threshold:.6,distance:100},Ns={useExtendedSearch:!1,getFn:Ts,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var T={...Os,...Rs,...Ls,...Ns};const Ws=/[^ ]+/g;function Ps(t=1,e=3){const o=new Map,l=Math.pow(10,e);return{get(s){const u=s.match(Ws).length;if(o.has(u))return o.get(u);const i=1/Math.pow(u,.5*t),a=parseFloat(Math.round(i*l)/l);return o.set(u,a),a},clear(){o.clear()}}}class We{constructor({getFn:e=T.getFn,fieldNormWeight:o=T.fieldNormWeight}={}){this.norm=Ps(o,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((o,l)=>{this._keysMap[o.id]=l})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,le(this.docs[0])?this.docs.forEach((e,o)=>{this._addString(e,o)}):this.docs.forEach((e,o)=>{this._addObject(e,o)}),this.norm.clear())}add(e){const o=this.size();le(e)?this._addString(e,o):this._addObject(e,o)}removeAt(e){this.records.splice(e,1);for(let o=e,l=this.size();o<l;o+=1)this.records[o].i-=1}getValueForItemAtKeyId(e,o){return e[this._keysMap[o]]}size(){return this.records.length}_addString(e,o){if(!q(e)||we(e))return;let l={v:e,i:o,n:this.norm.get(e)};this.records.push(l)}_addObject(e,o){let l={i:o,$:{}};this.keys.forEach((s,u)=>{let i=s.getFn?s.getFn(e):this.getFn(e,s.path);if(q(i)){if(de(i)){let a=[];const d=[{nestedArrIndex:-1,value:i}];for(;d.length;){const{nestedArrIndex:m,value:h}=d.pop();if(q(h))if(le(h)&&!we(h)){let p={v:h,i:m,n:this.norm.get(h)};a.push(p)}else de(h)&&h.forEach((p,c)=>{d.push({nestedArrIndex:c,value:p})})}l.$[u]=a}else if(le(i)&&!we(i)){let a={v:i,n:this.norm.get(i)};l.$[u]=a}}}),this.records.push(l)}toJSON(){return{keys:this.keys,records:this.records}}}function it(t,e,{getFn:o=T.getFn,fieldNormWeight:l=T.fieldNormWeight}={}){const s=new We({getFn:o,fieldNormWeight:l});return s.setKeys(t.map(lt)),s.setSources(e),s.create(),s}function Vs(t,{getFn:e=T.getFn,fieldNormWeight:o=T.fieldNormWeight}={}){const{keys:l,records:s}=t,u=new We({getFn:e,fieldNormWeight:o});return u.setKeys(l),u.setIndexRecords(s),u}function ke(t,{errors:e=0,currentLocation:o=0,expectedLocation:l=0,distance:s=T.distance,ignoreLocation:u=T.ignoreLocation}={}){const i=e/t.length;if(u)return i;const a=Math.abs(l-o);return s?i+a/s:a?1:i}function js(t=[],e=T.minMatchCharLength){let o=[],l=-1,s=-1,u=0;for(let i=t.length;u<i;u+=1){let a=t[u];a&&l===-1?l=u:!a&&l!==-1&&(s=u-1,s-l+1>=e&&o.push([l,s]),l=-1)}return t[u-1]&&u-l>=e&&o.push([l,u-1]),o}const he=32;function Ks(t,e,o,{location:l=T.location,distance:s=T.distance,threshold:u=T.threshold,findAllMatches:i=T.findAllMatches,minMatchCharLength:a=T.minMatchCharLength,includeMatches:d=T.includeMatches,ignoreLocation:m=T.ignoreLocation}={}){if(e.length>he)throw new Error(Ms(he));const h=e.length,p=t.length,c=Math.max(0,Math.min(l,p));let _=u,E=c;const I=a>1||d,N=I?Array(p):[];let B;for(;(B=t.indexOf(e,E))>-1;){let g=ke(e,{currentLocation:B,expectedLocation:c,distance:s,ignoreLocation:m});if(_=Math.min(g,_),E=B+h,I){let k=0;for(;k<h;)N[B+k]=1,k+=1}}E=-1;let x=[],M=1,w=h+p;const S=1<<h-1;for(let g=0;g<h;g+=1){let k=0,r=w;for(;k<r;)ke(e,{errors:g,currentLocation:c+r,expectedLocation:c,distance:s,ignoreLocation:m})<=_?k=r:w=r,r=Math.floor((w-k)/2+k);w=r;let v=Math.max(1,c-r+1),y=i?p:Math.min(c+r,p)+h,R=Array(y+2);R[y+1]=(1<<g)-1;for(let H=y;H>=v;H-=1){let D=H-1,Y=o[t.charAt(D)];if(I&&(N[D]=+!!Y),R[H]=(R[H+1]<<1|1)&Y,g&&(R[H]|=(x[H+1]|x[H])<<1|1|x[H+1]),R[H]&S&&(M=ke(e,{errors:g,currentLocation:D,expectedLocation:c,distance:s,ignoreLocation:m}),M<=_)){if(_=M,E=D,E<=c)break;v=Math.max(1,2*c-E)}}if(ke(e,{errors:g+1,currentLocation:c,expectedLocation:c,distance:s,ignoreLocation:m})>_)break;x=R}const $={isMatch:E>=0,score:Math.max(.001,M)};if(I){const g=js(N,a);g.length?d&&($.indices=g):$.isMatch=!1}return $}function Hs(t){let e={};for(let o=0,l=t.length;o<l;o+=1){const s=t.charAt(o);e[s]=(e[s]||0)|1<<l-o-1}return e}class at{constructor(e,{location:o=T.location,threshold:l=T.threshold,distance:s=T.distance,includeMatches:u=T.includeMatches,findAllMatches:i=T.findAllMatches,minMatchCharLength:a=T.minMatchCharLength,isCaseSensitive:d=T.isCaseSensitive,ignoreLocation:m=T.ignoreLocation}={}){if(this.options={location:o,threshold:l,distance:s,includeMatches:u,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:d,ignoreLocation:m},this.pattern=d?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(c,_)=>{this.chunks.push({pattern:c,alphabet:Hs(c),startIndex:_})},p=this.pattern.length;if(p>he){let c=0;const _=p%he,E=p-_;for(;c<E;)h(this.pattern.substr(c,he),c),c+=he;if(_){const I=p-he;h(this.pattern.substr(I),I)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:o,includeMatches:l}=this.options;if(o||(e=e.toLowerCase()),this.pattern===e){let E={isMatch:!0,score:0};return l&&(E.indices=[[0,e.length-1]]),E}const{location:s,distance:u,threshold:i,findAllMatches:a,minMatchCharLength:d,ignoreLocation:m}=this.options;let h=[],p=0,c=!1;this.chunks.forEach(({pattern:E,alphabet:I,startIndex:N})=>{const{isMatch:B,score:x,indices:M}=Ks(e,E,I,{location:s+N,distance:u,threshold:i,findAllMatches:a,minMatchCharLength:d,includeMatches:l,ignoreLocation:m});B&&(c=!0),p+=x,B&&M&&(h=[...h,...M])});let _={isMatch:c,score:c?p/this.chunks.length:1};return c&&l&&(_.indices=h),_}}class pe{constructor(e){this.pattern=e}static isMultiMatch(e){return Je(e,this.multiRegex)}static isSingleMatch(e){return Je(e,this.singleRegex)}search(){}}function Je(t,e){const o=t.match(e);return o?o[1]:null}class Ds extends pe{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const o=e===this.pattern;return{isMatch:o,score:o?0:1,indices:[0,this.pattern.length-1]}}}class Ys extends pe{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const l=e.indexOf(this.pattern)===-1;return{isMatch:l,score:l?0:1,indices:[0,e.length-1]}}}class zs extends pe{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const o=e.startsWith(this.pattern);return{isMatch:o,score:o?0:1,indices:[0,this.pattern.length-1]}}}class Us extends pe{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const o=!e.startsWith(this.pattern);return{isMatch:o,score:o?0:1,indices:[0,e.length-1]}}}class Xs extends pe{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const o=e.endsWith(this.pattern);return{isMatch:o,score:o?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Gs extends pe{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const o=!e.endsWith(this.pattern);return{isMatch:o,score:o?0:1,indices:[0,e.length-1]}}}class ct extends pe{constructor(e,{location:o=T.location,threshold:l=T.threshold,distance:s=T.distance,includeMatches:u=T.includeMatches,findAllMatches:i=T.findAllMatches,minMatchCharLength:a=T.minMatchCharLength,isCaseSensitive:d=T.isCaseSensitive,ignoreLocation:m=T.ignoreLocation}={}){super(e),this._bitapSearch=new at(e,{location:o,threshold:l,distance:s,includeMatches:u,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:d,ignoreLocation:m})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class rt extends pe{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let o=0,l;const s=[],u=this.pattern.length;for(;(l=e.indexOf(this.pattern,o))>-1;)o=l+u,s.push([l,o-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const Be=[Ds,rt,zs,Us,Gs,Xs,Ys,ct],Qe=Be.length,Js=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Qs="|";function qs(t,e={}){return t.split(Qs).map(o=>{let l=o.trim().split(Js).filter(u=>u&&!!u.trim()),s=[];for(let u=0,i=l.length;u<i;u+=1){const a=l[u];let d=!1,m=-1;for(;!d&&++m<Qe;){const h=Be[m];let p=h.isMultiMatch(a);p&&(s.push(new h(p,e)),d=!0)}if(!d)for(m=-1;++m<Qe;){const h=Be[m];let p=h.isSingleMatch(a);if(p){s.push(new h(p,e));break}}}return s})}const Zs=new Set([ct.type,rt.type]);class en{constructor(e,{isCaseSensitive:o=T.isCaseSensitive,includeMatches:l=T.includeMatches,minMatchCharLength:s=T.minMatchCharLength,ignoreLocation:u=T.ignoreLocation,findAllMatches:i=T.findAllMatches,location:a=T.location,threshold:d=T.threshold,distance:m=T.distance}={}){this.query=null,this.options={isCaseSensitive:o,includeMatches:l,minMatchCharLength:s,findAllMatches:i,ignoreLocation:u,location:a,threshold:d,distance:m},this.pattern=o?e:e.toLowerCase(),this.query=qs(this.pattern,this.options)}static condition(e,o){return o.useExtendedSearch}searchIn(e){const o=this.query;if(!o)return{isMatch:!1,score:1};const{includeMatches:l,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let u=0,i=[],a=0;for(let d=0,m=o.length;d<m;d+=1){const h=o[d];i.length=0,u=0;for(let p=0,c=h.length;p<c;p+=1){const _=h[p],{isMatch:E,indices:I,score:N}=_.search(e);if(E){if(u+=1,a+=N,l){const B=_.constructor.type;Zs.has(B)?i=[...i,...I]:i.push(I)}}else{a=0,u=0,i.length=0;break}}if(u){let p={isMatch:!0,score:a/u};return l&&(p.indices=i),p}}return{isMatch:!1,score:1}}}const Fe=[];function tn(...t){Fe.push(...t)}function Te(t,e){for(let o=0,l=Fe.length;o<l;o+=1){let s=Fe[o];if(s.condition(t,e))return new s(t,e)}return new at(t,e)}const $e={AND:"$and",OR:"$or"},Re={PATH:"$path",PATTERN:"$val"},Oe=t=>!!(t[$e.AND]||t[$e.OR]),sn=t=>!!t[Re.PATH],nn=t=>!de(t)&&nt(t)&&!Oe(t),qe=t=>({[$e.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function ut(t,e,{auto:o=!0}={}){const l=s=>{let u=Object.keys(s);const i=sn(s);if(!i&&u.length>1&&!Oe(s))return l(qe(s));if(nn(s)){const d=i?s[Re.PATH]:u[0],m=i?s[Re.PATTERN]:s[d];if(!le(m))throw new Error(Es(d));const h={keyId:Ae(d),pattern:m};return o&&(h.searcher=Te(m,e)),h}let a={children:[],operator:u[0]};return u.forEach(d=>{const m=s[d];de(m)&&m.forEach(h=>{a.children.push(l(h))})}),a};return Oe(t)||(t=qe(t)),l(t)}function on(t,{ignoreFieldNorm:e=T.ignoreFieldNorm}){t.forEach(o=>{let l=1;o.matches.forEach(({key:s,norm:u,score:i})=>{const a=s?s.weight:null;l*=Math.pow(i===0&&a?Number.EPSILON:i,(a||1)*(e?1:u))}),o.score=l})}function ln(t,e){const o=t.matches;e.matches=[],q(o)&&o.forEach(l=>{if(!q(l.indices)||!l.indices.length)return;const{indices:s,value:u}=l;let i={indices:s,value:u};l.key&&(i.key=l.key.src),l.idx>-1&&(i.refIndex=l.idx),e.matches.push(i)})}function an(t,e){e.score=t.score}function cn(t,e,{includeMatches:o=T.includeMatches,includeScore:l=T.includeScore}={}){const s=[];return o&&s.push(ln),l&&s.push(an),t.map(u=>{const{idx:i}=u,a={item:e[i],refIndex:i};return s.length&&s.forEach(d=>{d(u,a)}),a})}class _e{constructor(e,o={},l){this.options={...T,...o},this.options.useExtendedSearch,this._keyStore=new Fs(this.options.keys),this.setCollection(e,l)}setCollection(e,o){if(this._docs=e,o&&!(o instanceof We))throw new Error(ws);this._myIndex=o||it(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){q(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const o=[];for(let l=0,s=this._docs.length;l<s;l+=1){const u=this._docs[l];e(u,l)&&(this.removeAt(l),l-=1,s-=1,o.push(u))}return o}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:o=-1}={}){const{includeMatches:l,includeScore:s,shouldSort:u,sortFn:i,ignoreFieldNorm:a}=this.options;let d=le(e)?le(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return on(d,{ignoreFieldNorm:a}),u&&d.sort(i),st(o)&&o>-1&&(d=d.slice(0,o)),cn(d,this._docs,{includeMatches:l,includeScore:s})}_searchStringList(e){const o=Te(e,this.options),{records:l}=this._myIndex,s=[];return l.forEach(({v:u,i,n:a})=>{if(!q(u))return;const{isMatch:d,score:m,indices:h}=o.searchIn(u);d&&s.push({item:u,idx:i,matches:[{score:m,value:u,norm:a,indices:h}]})}),s}_searchLogical(e){const o=ut(e,this.options),l=(a,d,m)=>{if(!a.children){const{keyId:p,searcher:c}=a,_=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(d,p),searcher:c});return _&&_.length?[{idx:m,item:d,matches:_}]:[]}const h=[];for(let p=0,c=a.children.length;p<c;p+=1){const _=a.children[p],E=l(_,d,m);if(E.length)h.push(...E);else if(a.operator===$e.AND)return[]}return h},s=this._myIndex.records,u={},i=[];return s.forEach(({$:a,i:d})=>{if(q(a)){let m=l(o,a,d);m.length&&(u[d]||(u[d]={idx:d,item:a,matches:[]},i.push(u[d])),m.forEach(({matches:h})=>{u[d].matches.push(...h)}))}}),i}_searchObjectList(e){const o=Te(e,this.options),{keys:l,records:s}=this._myIndex,u=[];return s.forEach(({$:i,i:a})=>{if(!q(i))return;let d=[];l.forEach((m,h)=>{d.push(...this._findMatches({key:m,value:i[h],searcher:o}))}),d.length&&u.push({idx:a,item:i,matches:d})}),u}_findMatches({key:e,value:o,searcher:l}){if(!q(o))return[];let s=[];if(de(o))o.forEach(({v:u,i,n:a})=>{if(!q(u))return;const{isMatch:d,score:m,indices:h}=l.searchIn(u);d&&s.push({score:m,key:e,value:u,idx:i,norm:a,indices:h})});else{const{v:u,n:i}=o,{isMatch:a,score:d,indices:m}=l.searchIn(u);a&&s.push({score:d,key:e,value:u,norm:i,indices:m})}return s}}_e.version="7.0.0";_e.createIndex=it;_e.parseIndex=Vs;_e.config=T;_e.parseQuery=ut;tn(en);const rn={class:"BuilderTemplateInput"},un=["value","placeholder","list"],dn=["id"],vn=["value"],pn=["variant","value","placeholder"],hn={key:2,class:"fieldStateAutocomplete",tabindex:"-1"},fn=["value","onClick"],_n={class:"prop"},mn={class:"type"},yn=X({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:void 0},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0}},emits:["input","update:value"],setup(t,{expose:e,emit:o}){const l=o,s=t,u=W(P.core),i=mt([]),a=O(null);e({focus:()=>{var x;return(x=a.value)==null?void 0:x.focus()}});function d(x,M){return M.reduce((w,S)=>w==null?void 0:w[S],x)}const m=x=>{var y;let M=((y=a.value)==null?void 0:y.value)??"";const{selectionStart:w,selectionEnd:S}=a.value??{},$=M.slice(0,w),g=p($);if(g===null)return;const r=g.at(-1).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"$",v=$.replace(new RegExp(r),x);M=v+M.slice(S),l("input",{target:{value:M}}),l("update:value",M),i.value=[],a.value.focus(),ue(()=>{a.value.selectionEnd=v.length,a.value.selectionStart=v.length})},h=x=>x===null?"null":x===void 0?"undefined":typeof x,p=x=>{if((s.type??"template")==="state")return x.split(".");const M=x.match(/@\{([^}{@]*)$/);return M?((M==null?void 0:M[1])??"").split("."):null},c=x=>x.replace(/\\/g,"\\\\").replace(/\./g,"\\."),_=x=>{l("input",x),l("update:value",x.target.value),E()},E=()=>{const{selectionStart:x,selectionEnd:M,value:w}=a.value??{};if(!(x===M)){i.value=[];return}const $=w.slice(0,x),g=p($);if(g===null){i.value=[];return}const k=g.at(-1),r=g.slice(0,-1),v=Object.entries(d(u.userState.value,r)??{}).map(([R,K])=>({text:c(R),type:h(K)})),y=new _e(v,{findAllMatches:!0,includeMatches:!0,keys:["text"]});if(k===""){i.value=v;return}i.value=y.search(k).map(R=>{const{item:K}=R;return K})};let I;function N(){I=setTimeout(()=>{i.value=[],I=null},300)}function B(){I&&(clearTimeout(I),I=null)}return(x,M)=>{const w=Le("capture-tabs");return f(),b("div",rn,[s.multiline?C("",!0):(f(),b(U,{key:0},[n("input",{ref_key:"input",ref:a,class:"templateInput",type:"text",value:s.value,autocorrect:"off",autocomplete:"off",spellcheck:"false",placeholder:s.placeholder,list:s.options?`list-${s.inputId}`:void 0,onInput:_,onBlur:N},null,40,un),s.options?(f(),b("datalist",{key:0,id:`list-${s.inputId}`},[(f(!0),b(U,null,J(t.options,(S,$)=>(f(),b("option",{key:$,value:$},[S.toLowerCase()!==$.toLowerCase()?(f(),b(U,{key:0},[ie(L(S),1)],64)):C("",!0)],8,vn))),128))],8,dn)):C("",!0)],64)),s.multiline?re((f(),b("textarea",{key:1,ref_key:"input",ref:a,class:"templateInput",variant:s.variant,value:s.value,autocorrect:"off",autocomplete:"off",spellcheck:"false",rows:"3",placeholder:s.placeholder,onInput:_},null,40,pn)),[[w]]):C("",!0),i.value.length?(f(),b("div",hn,[(f(!0),b(U,null,J(i.value,(S,$)=>(f(),b("button",{key:$,class:"fieldStateAutocompleteOption",value:$,onFocusout:N,onFocusin:B,onClick:()=>m(S.text)},[n("span",_n,L(S.text),1),n("span",mn,L(S.type),1)],40,fn))),128))])):C("",!0)])}}}),te=G(yn,[["__scopeId","data-v-031fbcfd"]]),gn=["data-automation-key"],kn={class:"chipStackContainer"},bn={class:"chipStack"},$n={key:0,class:"main"},xn={key:0,class:"pickerContainer"},In=X({__name:"BuilderFieldsAlign",props:{componentId:{},fieldKey:{},direction:{}},setup(t){const e=W(P.core),o=W(P.builderManager),{setContentValue:l}=se(e,o),s=O(null),u=O(null),i=O(null),a=[{key:"start",label:"Left",match:r=>r=="start",default:"start",icon:"format_align_left"},{key:"center",label:"Center",match:r=>r=="center",default:"center",icon:"format_align_center"},{key:"end",label:"Right",match:r=>r=="end",default:"end",icon:"format_align_right"}],d=[{key:"start",label:"Top",match:r=>r=="start",default:"start",icon:"vertical_align_top"},{key:"center",label:"Center",match:r=>r=="center",default:"center",icon:"vertical_align_center"},{key:"end",label:"Bottom",match:r=>r=="end",default:"end",icon:"vertical_align_bottom"}],m={pick:u,css:i,default:null},h=t,{componentId:p,fieldKey:c,direction:_}=ve(h),E=F(()=>e.getComponentById(p.value)),I=F(()=>_.value=="vertical"?d:_.value=="horizontal"?a:d),N=F(()=>I.value.map(r=>({value:r.key,label:r.label,icon:r.icon}))),B=F(()=>{const r=E.value.content[c.value];for(const v in I.value)if(r&&I.value[v].match(r))return I.value[v].key;return null}),x=F(()=>{const r=E.value.content[c.value];return r||""}),w=O((()=>{if(!x.value)return"default";for(const r in I.value)if(I.value[r].match(x.value))return"pick";return"css"})()),S=()=>{var v;const r=(v=m[w.value])==null?void 0:v.value;r&&(r.focus(),typeof r.selectionStart=="number"&&(r.selectionStart=r.selectionEnd=r.value.length))},$=async r=>{w.value!=r&&(w.value=r,await ue(),S())},g=r=>{for(const v in I.value)if(I.value[v].key==r){const y=I.value[v].default;E.value.content[c.value]=y,l(E.value.id,c.value,y)}},k=r=>{l(E.value.id,c.value,r.target.value)};return fe(()=>{s.value.addEventListener("focus",S)}),me(()=>{s.value.removeEventListener("focus",S)}),(r,v)=>(f(),b("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":h.fieldKey},[n("div",kn,[n("div",bn,[n("button",{class:j(["chip",{active:w.value=="default"}]),tabindex:"0",onClick:v[0]||(v[0]=()=>{$("default"),A(l)(E.value.id,A(c),void 0)})}," Default ",2),n("button",{class:j(["chip",{active:w.value=="css"}]),tabindex:"0",onClick:v[1]||(v[1]=y=>$("css"))}," CSS ",2),n("button",{class:j(["chip",{active:w.value=="pick"}]),tabindex:"0",onClick:v[2]||(v[2]=y=>$("pick"))}," Pick ",2)])]),w.value=="pick"||w.value=="css"?(f(),b("div",$n,[w.value=="pick"?(f(),b("div",xn,[z(Ne,{"default-value":B.value,options:N.value,onSelect:g},null,8,["default-value","options"])])):C("",!0),w.value=="css"?(f(),V(te,{key:1,ref_key:"freehandInputEl",ref:i,value:E.value.content[A(c)],onInput:k},null,8,["value"])):C("",!0)])):C("",!0)],8,gn))}}),Ze=G(In,[["__scopeId","data-v-c4d22832"]]),Sn=["data-automation-key"],Cn={class:"chipStackContainer"},wn={class:"chipStack"},En={key:0,class:"main"},Mn={key:0,class:"pickerContainer"},An=["value"],Bn=X({__name:"BuilderFieldsColor",props:{componentId:{},fieldKey:{}},setup(t){const e=W(P.core),o=W(P.builderManager),{setContentValue:l}=se(e,o),s=O(null),u=O(null),i=O(null),a={pick:u,css:i,default:null},d=t,{componentId:m,fieldKey:h}=ve(d),p=F(()=>e.getComponentById(m.value)),_=O((()=>{const B=p.value.content[h.value];return B?/#[A-Fa-f0-9]{6}/.test(B)?"pick":"css":"default"})()),E=()=>{var x;const B=(x=a[_.value])==null?void 0:x.value;B&&(B.focus(),typeof B.selectionStart=="number"&&(B.selectionStart=B.selectionEnd=B.value.length))},I=async B=>{_.value!=B&&(_.value=B,await ue(),E())},N=B=>l(p.value.id,h.value,B.target.value);return fe(()=>{s.value.addEventListener("focus",E)}),me(()=>{s.value.removeEventListener("focus",E)}),(B,x)=>(f(),b("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":A(h)},[n("div",Cn,[n("div",wn,[n("button",{class:j(["chip",{active:_.value=="default"}]),tabindex:"0",onClick:x[0]||(x[0]=()=>{I("default"),A(l)(p.value.id,A(h),void 0)})}," Default ",2),n("button",{class:j(["chip",{active:_.value=="css"}]),tabindex:"0",onClick:x[1]||(x[1]=M=>I("css"))}," CSS ",2),n("button",{class:j(["chip",{active:_.value=="pick"}]),tabindex:"0",onClick:x[2]||(x[2]=M=>I("pick"))}," Pick ",2)])]),_.value=="pick"||_.value=="css"?(f(),b("div",En,[_.value=="pick"?(f(),b("div",Mn,[n("input",{ref_key:"pickerEl",ref:u,type:"color",value:p.value.content[A(h)],onInput:N},null,40,An)])):C("",!0),_.value=="css"?(f(),V(te,{key:1,ref_key:"freehandInputEl",ref:i,value:p.value.content[A(h)],onInput:N},null,8,["value"])):C("",!0)])):C("",!0)],8,Sn))}}),Fn=G(Bn,[["__scopeId","data-v-349bc92a"]]),Tn=X({__name:"BuilderFieldsObject",props:{componentId:{},fieldKey:{}},setup(t){const e=W(P.core),o=W(P.builderManager),{setContentValue:l}=se(e,o),s=t,{componentId:u,fieldKey:i}=ve(s),a=F(()=>e.getComponentById(u.value)),d=h=>{l(a.value.id,i.value,h)},m=F(()=>{const{type:h}=a.value;return e.getComponentDefinition(h).fields[i.value]});return(h,p)=>{var c;return f(),V(te,{class:"BuilderFieldsObject","data-automation-key":s.fieldKey,multiline:"",variant:"code",value:a.value.content[A(i)],placeholder:(c=m.value)==null?void 0:c.default,onInput:p[0]||(p[0]=_=>d(_.target.value))},null,8,["data-automation-key","value","placeholder"])}}}),dt=G(Tn,[["__scopeId","data-v-bdd7e772"]]),vt=t=>(ne("data-v-bf6c8235"),t=t(),oe(),t),Rn=["data-automation-key"],On={class:"chipStackContainer"},Ln={class:"chipStack"},Nn={class:"staticList"},Wn=["onClick"],Pn=vt(()=>n("i",{class:"material-symbols-outlined"},"delete",-1)),Vn=[Pn],jn={class:"formAdd"},Kn=vt(()=>n("i",{class:"material-symbols-outlined"},"add",-1)),Hn=X({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0}},setup(t){const e=W(P.core),o=W(P.builderManager),{setContentValue:l}=se(e,o),s=t,{componentId:u,fieldKey:i}=ve(s),a=F(()=>e.getComponentById(u.value)),d=O(null),m=O(null),h=O(null),p=O({}),c=O({key:"",value:""}),{getEvaluatedFields:_}=yt(e),E=F(()=>_(s.instancePath)[i.value].value),I=async M=>{h.value!=M&&(h.value=M,h.value=="assisted"&&N(),await ue())},N=()=>{p.value=E.value??{}},B=()=>{const{key:M,value:w}=c.value;M===""||w===""||(p.value={...p.value,[M]:w},l(a.value.id,i.value,JSON.stringify(p.value,null,2)),c.value={key:"",value:""},m.value.focus())},x=M=>{const w=p.value;if(delete w[M],p.value=w,Object.keys(p.value).length==0){l(a.value.id,i.value,void 0);return}l(a.value.id,i.value,JSON.stringify(p.value,null,2))};return et(()=>{var M;return(M=a.value)==null?void 0:M.content[i.value]},async()=>{!a.value||!E.value||(p.value=E.value)}),fe(async()=>{E.value?(p.value=E.value,I("assisted")):I("freehand")}),(M,w)=>(f(),b("div",{ref_key:"rootEl",ref:d,class:"BuilderFieldsOptions",tabindex:"-1","data-automation-key":s.fieldKey},[n("div",On,[n("div",Ln,[n("button",{class:j(["chip",{active:h.value=="assisted"}]),tabindex:"0",onClick:w[0]||(w[0]=S=>I("assisted"))}," Static List ",2),n("button",{class:j(["chip",{active:h.value=="freehand"}]),tabindex:"0",onClick:w[1]||(w[1]=S=>I("freehand"))}," JSON ",2)])]),h.value=="assisted"?(f(),b(U,{key:0},[n("div",Nn,[(f(!0),b(U,null,J(p.value,(S,$)=>(f(),b("div",{key:$,class:"entry"},[n("div",null,L($)+" Â· "+L(S),1),n("button",{variant:"subtle",onClick:g=>x($)},Vn,8,Wn)]))),128))]),n("div",jn,[z(te,{ref_key:"assistedKeyEl",ref:m,class:"inputKey",placeholder:"Type a key...",value:c.value.key,"onUpdate:value":w[2]||(w[2]=S=>c.value.key=S),onKeydown:ze(B,["enter"])},null,8,["value"]),z(te,{class:"inputValue",placeholder:"Type a value...",value:c.value.value,"onUpdate:value":w[3]||(w[3]=S=>c.value.value=S),onKeydown:ze(B,["enter"])},null,8,["value"]),n("button",{onClick:B},[Kn,ie("Add ")])])],64)):C("",!0),h.value=="freehand"?(f(),V(dt,{key:1,"component-id":a.value.id,"field-key":A(i)},null,8,["component-id","field-key"])):C("",!0)],8,Rn))}}),Dn=G(Hn,[["__scopeId","data-v-bf6c8235"]]),Q=t=>(ne("data-v-4fa8d105"),t=t(),oe(),t),Yn=["data-automation-key"],zn={class:"chipStackContainer"},Un={class:"chipStack"},Xn={key:0,class:"main"},Gn={key:0,class:"pickerContainer"},Jn={key:0,class:"row"},Qn=Q(()=>n("i",null,"All",-1)),qn=["value"],Zn=Q(()=>n("div",null,"px",-1)),eo={key:1},to={class:"row"},so=Q(()=>n("i",null,"X",-1)),no=["value"],oo=Q(()=>n("div",null,"px",-1)),lo={class:"row"},io=Q(()=>n("i",null,"Y",-1)),ao=["value"],co=Q(()=>n("div",null,"px",-1)),ro={key:2},uo={class:"row"},vo=Q(()=>n("i",null,"Left",-1)),po=["value"],ho=Q(()=>n("div",null,"px",-1)),fo={class:"row"},_o=Q(()=>n("i",null,"Right",-1)),mo=["value"],yo=Q(()=>n("div",null,"px",-1)),go={class:"row"},ko=Q(()=>n("i",null,"Top",-1)),bo=["value"],$o=Q(()=>n("div",null,"px",-1)),xo={class:"row"},Io=Q(()=>n("i",null,"Bottom",-1)),So=["value"],Co=Q(()=>n("div",null,"px",-1)),wo=X({__name:"BuilderFieldsPadding",props:{componentId:{},fieldKey:{}},setup(t){const e=W(P.core),o=W(P.builderManager),{setContentValue:l}=se(e,o),s=O(null),u=O(null),i=O(null),a=O(null),d=[{key:"all_sides",label:"All sides",match:v=>v.split(" ").length==1&&v.endsWith("px"),default:()=>x.value?x.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:v=>v.split(" ").length==2&&v.endsWith("px"),default:()=>x.value?x.value[2]+" "+x.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:v=>v.split(" ").length==4&&v.endsWith("px"),default:()=>x.value?[x.value[3],x.value[1],x.value[2],x.value[0]].join(" "):"0px 0px 0px 0px"}],m={pick:u,css:a,default:null},h=t,{componentId:p,fieldKey:c}=ve(h),_=F(()=>e.getComponentById(p.value)),E=F(()=>d.map(v=>({value:v.key,label:v.label,icon:"padding"}))),I=F(()=>{const v=_.value.content[c.value];for(const y in d)if(v&&d[y].match(v))return d[y].key;return null}),N=F(()=>{const v=_.value.content[c.value];return v||""}),B=F(()=>{const v=x.value;return v?[v[0].substring(0,v[0].length-2),v[1].substring(0,v[1].length-2),v[2].substring(0,v[2].length-2),v[3].substring(0,v[3].length-2)]:["0","0","0","0"]}),x=F(()=>{const v=_.value.content[c.value];if(v){const y=v.split(" ");if(y.length==1&&y[0].endsWith("px"))return[y[0],y[0],y[0],y[0]];if(y.length==2&&y[0].endsWith("px")&&y[0].endsWith("px"))return[y[1],y[1],y[0],y[0]];if(y.length==4&&y[0].endsWith("px")&&y[1].endsWith("px")&&y[2].endsWith("px")&&y[3].endsWith("px"))return[y[3],y[1],y[0],y[2]]}else return null;return null}),w=O((()=>{if(!N.value)return"default";for(const v in d)if(d[v].match(N.value))return"pick";return"css"})()),S=()=>{var y;const v=(y=m[w.value])==null?void 0:y.value;v&&(v.focus(),typeof v.selectionStart=="number"&&(v.selectionStart=v.selectionEnd=v.value.length))},$=async v=>{w.value!=v&&(w.value=v,await ue(),S())},g=v=>{for(const y in d)if(d[y].key==v){const R=d[y].default();_.value.content[c.value]=R,l(_.value.id,c.value,R)}ue(()=>{i.value.focus()})},k=v=>{l(_.value.id,c.value,v.target.value)},r=(v,y,R)=>{const K=v.target.value,H=_.value.content[c.value];if(y=="all_sides")l(_.value.id,c.value,K+"px");else if(y=="XY sides"){const D=H.split(" ");R=="x"?D[1]=K+"px":R=="y"&&(D[0]=K+"px"),l(_.value.id,c.value,D.join(" "))}else if(y=="Per side"){const D=H.split(" ");R=="top"?D[0]=K+"px":R=="right"?D[1]=K+"px":R=="bottom"?D[2]=K+"px":R=="left"&&(D[3]=K+"px"),l(_.value.id,c.value,D.join(" "))}};return fe(()=>{s.value.addEventListener("focus",S)}),me(()=>{s.value.removeEventListener("focus",S)}),(v,y)=>(f(),b("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":h.fieldKey},[n("div",zn,[n("div",Un,[n("button",{class:j(["chip",{active:w.value=="default"}]),tabindex:"0",onClick:y[0]||(y[0]=()=>{$("default"),A(l)(_.value.id,A(c),void 0)})}," Default ",2),n("button",{class:j(["chip",{active:w.value=="css"}]),tabindex:"0",onClick:y[1]||(y[1]=R=>$("css"))}," CSS ",2),n("button",{class:j(["chip",{active:w.value=="pick"}]),tabindex:"0",onClick:y[2]||(y[2]=R=>$("pick"))}," Pick ",2)])]),w.value=="pick"||w.value=="css"?(f(),b("div",Xn,[w.value=="pick"?(f(),b("div",Gn,[z(Ne,{"default-value":I.value,options:E.value,onSelect:g},null,8,["default-value","options"]),I.value=="all_sides"?(f(),b("div",Jn,[Qn,n("input",{ref_key:"fixedEl",ref:i,type:"text",value:B.value[0],onInput:y[3]||(y[3]=R=>r(R,I.value))},null,40,qn),Zn])):C("",!0),I.value=="XY sides"?(f(),b("div",eo,[n("div",to,[so,n("input",{ref_key:"fixedEl",ref:i,type:"text",value:B.value[0],onInput:y[4]||(y[4]=R=>r(R,I.value,"x"))},null,40,no),oo]),n("div",lo,[io,n("input",{type:"text",value:B.value[2],onInput:y[5]||(y[5]=R=>r(R,I.value,"y"))},null,40,ao),co])])):C("",!0),I.value=="Per side"?(f(),b("div",ro,[n("div",uo,[vo,n("input",{ref_key:"fixedEl",ref:i,type:"text",value:B.value[0],onInput:y[6]||(y[6]=R=>r(R,I.value,"left"))},null,40,po),ho]),n("div",fo,[_o,n("input",{type:"text",value:B.value[1],onInput:y[7]||(y[7]=R=>r(R,I.value,"right"))},null,40,mo),yo]),n("div",go,[ko,n("input",{type:"text",value:B.value[2],onInput:y[8]||(y[8]=R=>r(R,I.value,"top"))},null,40,bo),$o]),n("div",xo,[Io,n("input",{type:"text",value:B.value[3],onInput:y[9]||(y[9]=R=>r(R,I.value,"bottom"))},null,40,So),Co])])):C("",!0)])):C("",!0),w.value=="css"?(f(),V(te,{key:1,ref_key:"freehandInputEl",ref:a,value:_.value.content[A(c)],onInput:k},null,8,["value"])):C("",!0)])):C("",!0)],8,Yn))}}),Eo=G(wo,[["__scopeId","data-v-4fa8d105"]]),ye=t=>(ne("data-v-07958672"),t=t(),oe(),t),Mo=["data-automation-key"],Ao={class:"chipStackContainer"},Bo={class:"chipStack"},Fo={key:0,class:"main"},To={key:0,class:"pickerContainer"},Ro={class:"param"},Oo={class:"header"},Lo=ye(()=>n("div",{class:"name"},"Offset X",-1)),No=["value"],Wo={class:"param"},Po={class:"header"},Vo=ye(()=>n("div",{class:"name"},"Offset Y",-1)),jo=["value"],Ko={class:"param"},Ho={class:"header"},Do=ye(()=>n("div",{class:"name"},"Blur radius",-1)),Yo=["value"],zo={class:"param"},Uo={class:"header"},Xo=ye(()=>n("div",{class:"name"},"Spread radius",-1)),Go=["value"],Jo={class:"param"},Qo=ye(()=>n("div",{class:"header"},[n("div",{class:"name"},"Color")],-1)),qo=["value"],Zo=X({__name:"BuilderFieldsShadow",props:{componentId:{},fieldKey:{}},setup(t){const e=W(P.core),o=W(P.builderManager),{setContentValue:l}=se(e,o),s=O(null),u=O(null),i=O(null),a=O(null),d=O(null),m=O(null),h=O(null),p={pick:i,css:u,default:null},c=t,{componentId:_,fieldKey:E}=ve(c),I=F(()=>e.getComponentById(_.value)),N=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,x=O((()=>{const k=I.value.content[E.value];return k?N.test(k)?"pick":"css":"default"})()),M=()=>{var r;const k=(r=p[x.value])==null?void 0:r.value;k&&(k.focus(),typeof k.selectionStart=="number"&&(k.selectionStart=k.selectionEnd=k.value.length))},w=async k=>{x.value!=k&&(x.value=k,await ue(),M())},S=()=>{const k=i.value.value,r=a.value.value,v=d.value.value,y=m.value.value,R=h.value.value,K=`${k}px ${r}px ${v}px ${y}px ${R}`;l(I.value.id,E.value,K)},$=k=>{l(I.value.id,E.value,k.target.value)},g=F(()=>{var v;const k=I.value.content[E.value];return(v=k==null?void 0:k.match(N))==null?void 0:v.groups});return fe(()=>{s.value.addEventListener("focus",M)}),me(()=>{s.value.removeEventListener("focus",M)}),(k,r)=>{var v,y,R,K,H,D,Y,Ve,je,Ke,He,De,Ye;return f(),b("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":c.fieldKey},[n("div",Ao,[n("div",Bo,[n("button",{class:j(["chip",{active:x.value=="default"}]),tabindex:"0",onClick:r[0]||(r[0]=()=>{w("default"),A(l)(I.value.id,A(E),void 0)})}," Default ",2),n("button",{class:j(["chip",{active:x.value=="css"}]),tabindex:"0",onClick:r[1]||(r[1]=pt=>w("css"))}," CSS ",2),n("button",{class:j(["chip",{active:x.value=="pick"}]),tabindex:"0",onClick:r[2]||(r[2]=pt=>w("pick"))}," Pick ",2)])]),x.value=="pick"||x.value=="css"?(f(),b("div",Fo,[x.value=="pick"?(f(),b("div",To,[n("div",Ro,[n("div",Oo,[Lo,re(n("div",{class:"value"},L((v=g.value)==null?void 0:v.offsetX)+"px ",513),[[ge,(y=g.value)==null?void 0:y.offsetX]])]),n("input",{ref_key:"paramOffsetXEl",ref:i,type:"range",min:"0",max:"32",value:(R=g.value)==null?void 0:R.offsetX,onInput:S},null,40,No)]),n("div",Wo,[n("div",Po,[Vo,re(n("div",{class:"value"},L((K=g.value)==null?void 0:K.offsetY)+"px ",513),[[ge,(H=g.value)==null?void 0:H.offsetY]])]),n("input",{ref_key:"paramOffsetYEl",ref:a,type:"range",min:"0",max:"32",value:(D=g.value)==null?void 0:D.offsetY,onInput:S},null,40,jo)]),n("div",Ko,[n("div",Ho,[Do,re(n("div",{class:"value"},L((Y=g.value)==null?void 0:Y.blurRadius)+"px ",513),[[ge,(Ve=g.value)==null?void 0:Ve.blurRadius]])]),n("input",{ref_key:"paramBlurRadiusEl",ref:d,type:"range",min:"0",max:"32",value:(je=g.value)==null?void 0:je.blurRadius,onInput:S},null,40,Yo)]),n("div",zo,[n("div",Uo,[Xo,re(n("div",{class:"value"},L((Ke=g.value)==null?void 0:Ke.spreadRadius)+"px ",513),[[ge,(He=g.value)==null?void 0:He.spreadRadius]])]),n("input",{ref_key:"paramSpreadRadiusEl",ref:m,type:"range",min:"-16",max:"32",value:(De=g.value)==null?void 0:De.spreadRadius,onInput:S},null,40,Go)]),n("div",Jo,[Qo,n("input",{ref_key:"paramColorEl",ref:h,type:"color",value:(Ye=g.value)==null?void 0:Ye.color,onInput:S},null,40,qo)])])):C("",!0),x.value=="css"?(f(),V(te,{key:1,ref_key:"freehandInputEl",ref:u,value:I.value.content[A(E)],onInput:$},null,8,["value"])):C("",!0)])):C("",!0)],8,Mo)}}}),el=G(Zo,[["__scopeId","data-v-07958672"]]),tl=["data-automation-key"],sl=X({__name:"BuilderFieldsText",props:{componentId:{},fieldKey:{}},setup(t){const e=W(P.core),o=W(P.builderManager),{setContentValue:l}=se(e,o),s=t,{componentId:u,fieldKey:i}=ve(s),a=F(()=>e.getComponentById(u.value)),d=F(()=>{const{type:c}=a.value;return e.getComponentDefinition(c).fields[i.value]}),m=F(()=>`${s.componentId}-${s.fieldKey}`),h=F(()=>{const c=d.value;return c.options?typeof c.options=="function"?c.options(e,u.value):c.options:{}}),p=c=>{l(a.value.id,i.value,c.target.value)};return(c,_)=>{var E,I;return f(),b("div",{class:"BuilderFieldsText","data-automation-key":s.fieldKey},[!d.value.control||d.value.control==A(Ue).Text?(f(),V(te,{key:0,class:"content","input-id":m.value,value:a.value.content[A(i)],placeholder:(E=d.value)==null?void 0:E.default,options:h.value,onInput:p},null,8,["input-id","value","placeholder","options"])):d.value.control==A(Ue).Textarea?(f(),V(te,{key:1,multiline:"",variant:"text",class:"content","input-id":m.value,value:a.value.content[A(i)],placeholder:(I=d.value)==null?void 0:I.default,onInput:p},null,8,["input-id","value","placeholder"])):C("",!0)],8,tl)}}}),Ee=G(sl,[["__scopeId","data-v-a2179e9a"]]),nl=t=>(ne("data-v-73d0ad4a"),t=t(),oe(),t),ol=["data-automation-key"],ll={class:"chipStackContainer"},il={class:"chipStack"},al={key:0,class:"main"},cl={key:0,class:"pickerContainer"},rl={key:0,class:"fixedContainer"},ul=["value"],dl=nl(()=>n("div",null,"px",-1)),vl=X({__name:"BuilderFieldsWidth",props:{componentId:{},fieldKey:{}},setup(t){const e=W(P.core),o=W(P.builderManager),{setContentValue:l}=se(e,o),s=O(null),u=O(null),i=O(null),a=O(null),d=[{key:"fixed",label:"Fixed",match:r=>r.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:r=>r=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:r=>r=="100%",default:"100%"}],m={pick:u,css:a,default:null},h=t,{componentId:p,fieldKey:c}=ve(h),_=F(()=>e.getComponentById(p.value)),E=F(()=>d.map(r=>({value:r.key,label:r.label,icon:"width"}))),I=F(()=>{const r=_.value.content[c.value];for(const v in d)if(r&&d[v].match(r))return d[v].key;return null}),N=F(()=>{const r=_.value.content[c.value];return r||""}),B=F(()=>{const r=_.value.content[c.value];if(r){if(r.endsWith("px"))return r.substring(0,r.length-2)}else return null;return null}),M=O((()=>{if(!N.value)return"default";for(const r in d)if(d[r].match(N.value))return"pick";return"css"})()),w=()=>{var v;const r=(v=m[M.value])==null?void 0:v.value;r&&(r.focus(),typeof r.selectionStart=="number"&&(r.selectionStart=r.selectionEnd=r.value.length))},S=async r=>{M.value!=r&&(M.value=r,await ue(),w())},$=r=>{for(const v in d)if(d[v].key==r){const y=d[v].default;_.value.content[c.value]=y,l(_.value.id,c.value,y)}r=="fixed"&&ue(()=>{i.value.focus()})},g=r=>{l(_.value.id,c.value,r.target.value)},k=r=>{l(_.value.id,c.value,r.target.value+"px")};return fe(()=>{s.value.addEventListener("focus",w)}),me(()=>{s.value.removeEventListener("focus",w)}),(r,v)=>(f(),b("div",{ref_key:"rootEl",ref:s,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":h.fieldKey},[n("div",ll,[n("div",il,[n("button",{class:j(["chip",{active:M.value=="default"}]),tabindex:"0",onClick:v[0]||(v[0]=()=>{S("default"),A(l)(_.value.id,A(c),void 0)})}," Default ",2),n("button",{class:j(["chip",{active:M.value=="css"}]),tabindex:"0",onClick:v[1]||(v[1]=y=>S("css"))}," CSS ",2),n("button",{class:j(["chip",{active:M.value=="pick"}]),tabindex:"0",onClick:v[2]||(v[2]=y=>S("pick"))}," Pick ",2)])]),M.value=="pick"||M.value=="css"?(f(),b("div",al,[M.value=="pick"?(f(),b("div",cl,[z(Ne,{"default-value":I.value,options:E.value,onSelect:$},null,8,["default-value","options"]),I.value=="fixed"?(f(),b("div",rl,[n("input",{ref_key:"fixedEl",ref:i,type:"text",value:B.value,onInput:k},null,40,ul),dl])):C("",!0)])):C("",!0),M.value=="css"?(f(),V(te,{key:1,ref_key:"freehandInputEl",ref:a,value:_.value.content[A(c)],onInput:g},null,8,["value"])):C("",!0)])):C("",!0)],8,ol))}}),pl=G(vl,[["__scopeId","data-v-73d0ad4a"]]),hl={class:"WdsFieldWrapper colorTransformer"},fl={key:0,class:"hint"},_l=X({__name:"WdsFieldWrapper",props:{label:{},hint:{},frameSlot:{type:Boolean}},setup(t){return(e,o)=>(f(),b("div",hl,[n("label",null,L(e.label),1),n("div",{class:j(["slotContainer",{frameSlot:e.frameSlot}])},[tt(e.$slots,"default",{},void 0,!0)],2),e.hint?(f(),b("div",fl,L(e.hint),1)):C("",!0)]))}}),be=G(_l,[["__scopeId","data-v-8db903aa"]]),xe=t=>(ne("data-v-5dc9ee74"),t=t(),oe(),t),ml=["data-automation-key"],yl={class:"tools"},gl=["onClick"],kl={class:"toolName"},bl=xe(()=>n("i",{class:"material-symbols-outlined"},"delete",-1)),$l=xe(()=>n("i",{class:"material-symbols-outlined"},"add",-1)),xl={class:"addToolForm"},Il=xe(()=>n("option",{value:"function"},"Function",-1)),Sl=xe(()=>n("option",{value:"graph"},"Knowledge graph",-1)),Cl={class:"addToolFormActions"},wl=X({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(t){const e=xt(()=>It(()=>import("./BuilderEmbeddedCodeEditor-DAG0asX-.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),o=W(P.core),l=W(P.builderManager),{setContentValue:s}=se(o,l),i={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:"6029b226-1ee0-4239-a1b0-cdeebfa3ad5a"},a=O(i),d=t,{componentId:m,fieldKey:h}=ve(d),p=F(()=>o.getComponentById(m.value)),c=F(()=>{let S={};try{S=JSON.parse(p.value.content[h.value])}catch{S={}}return S});function _(){a.value={...i,isShown:!0}}function E(){const{type:S,code:$,graphIds:g}=a.value;if(S=="function")return{...JSON.parse($),type:S};if(S=="graph"){const k=g.split(",").map(r=>r.trim());return{type:S,graph_ids:k}}throw"Unexpected tool type."}function I(S){let $=[];const{originalName:g,name:k}=S;return k||$.push("The name cannot be empty."),Object.keys(c.value).includes(k)&&!(g||g==k)&&$.push("An existing tool with the specified name already exists."),$}function N(){const S=I(a.value);if(S.length>0){S.forEach(alert);return}let $;try{$=E()}catch{alert("Incorrect tool definition");return}const g=JSON.stringify({...c.value,...a.value.originalName?{[a.value.originalName]:void 0}:{},[a.value.name]:$});s(p.value.id,h.value,g),a.value.isShown=!1}function B(S,$){var k;const{type:g}=$;if(g=="function")return{isShown:!0,type:"function",originalName:S,name:S,graphIds:"",code:JSON.stringify($,void 0,2)};if(g=="graph")return{isShown:!0,type:"graph",originalName:S,name:S,graphIds:(k=$.graph_ids)==null?void 0:k.join(","),code:""};throw"Unexpected tool type;"}function x(S){var g;const $=(g=c.value)==null?void 0:g[S];$&&(a.value=B(S,$))}function M(S){const $=JSON.stringify({...c.value,[S]:void 0});s(p.value.id,h.value,$)}const w={desc:"Close",fn:()=>{a.value.isShown=!1}};return(S,$)=>(f(),b("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":d.fieldKey},[n("div",yl,[(f(!0),b(U,null,J(c.value,(g,k)=>(f(),b("div",{key:k,class:"tool",onClick:r=>x(k)},[n("div",kl,L(k),1),z(Ce,{variant:"primary",size:"small",class:"delete",onClick:gt(r=>M(k),["stop"])},{default:ee(()=>[bl]),_:2},1032,["onClick"])],8,gl))),128))]),z(Ce,{size:"small",onClick:_},{default:ee(()=>[$l,ie(" Add tool")]),_:1}),a.value.isShown?(f(),V(Me,{key:0,"close-action":w,icon:"add","modal-title":"Add tool"},{default:ee(()=>[n("div",xl,[z(be,{label:"Tool type"},{default:ee(()=>[z(kt,{modelValue:a.value.type,"onUpdate:modelValue":$[0]||($[0]=g=>a.value.type=g)},{default:ee(()=>[Il,Sl]),_:1},8,["modelValue"])]),_:1}),z(be,{label:"Tool name"},{default:ee(()=>[z(bt,{modelValue:a.value.name,"onUpdate:modelValue":$[1]||($[1]=g=>a.value.name=g)},null,8,["modelValue"])]),_:1}),a.value.type=="function"?(f(),V(be,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:ee(()=>[z(A(e),{modelValue:a.value.code,"onUpdate:modelValue":$[2]||($[2]=g=>a.value.code=g),variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):C("",!0),a.value.type=="graph"?(f(),V(be,{key:1,label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas."},{default:ee(()=>[z($t,{modelValue:a.value.graphIds,"onUpdate:modelValue":$[3]||($[3]=g=>a.value.graphIds=g)},null,8,["modelValue"])]),_:1})):C("",!0)]),n("div",Cl,[z(Ce,{onClick:N},{default:ee(()=>[ie("Save")]),_:1})])]),_:1})):C("",!0)],8,ml))}}),El=G(wl,[["__scopeId","data-v-5dc9ee74"]]),Ml=t=>(ne("data-v-223e00e9"),t=t(),oe(),t),Al={key:0,class:"BuilderSettingsProperties"},Bl=Ml(()=>n("div",{class:"sectionTitle"},[n("span",{class:"material-symbols-outlined"}," tune "),n("h3",null,"Properties")],-1)),Fl={key:0,class:"title"},Tl={class:"fieldWrapper"},Rl={key:0,class:"name"},Ol={class:"type"},Ll={key:13,class:"desc"},Nl=X({__name:"BuilderSettingsProperties",setup(t){const e=W(P.core),o=W(P.builderManager),l=F(()=>{var d;return Ct((d=o.getSelection())==null?void 0:d.instancePath)}),s=F(()=>e.getComponentById(o.getSelectedId())),u=F(()=>{const{type:d}=s.value;return e.getComponentDefinition(d).fields}),i=[ce.General,ce.Style,ce.Tools],a=F(()=>{const d=Object.entries(u.value);return{[ce.General]:d.filter(([h,p])=>!p.category||p.category==ce.General),[ce.Style]:d.filter(([h,p])=>p.category==ce.Style),[ce.Tools]:d.filter(([h,p])=>p.category==ce.Tools)}});return(d,m)=>A(o).isSelectionActive()&&u.value?(f(),b("div",Al,[Bl,n("div",null,[(f(),b(U,null,J(i,h=>n("div",{key:h,class:"propertyCategory"},[a.value[h].length>0?(f(),b("div",Fl,[n("h4",null,L(h),1)])):C("",!0),(f(!0),b(U,null,J(a.value[h],([p,c])=>(f(),b("div",{key:p},[n("div",Tl,[h!="Tools"?(f(),b("div",Rl,[ie(L(c.name??p),1),n("span",Ol," : "+L(c.type),1)])):C("",!0),c.type==A(Z).Color?(f(),V(Fn,{key:1,class:"content","field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).Shadow?(f(),V(el,{key:2,class:"content","field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).KeyValue?(f(),V(Dn,{key:3,class:"content","field-key":p,"component-id":s.value.id,"instance-path":l.value},null,8,["field-key","component-id","instance-path"])):C("",!0),c.type==A(Z).Text?(f(),V(Ee,{key:4,"field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).Number?(f(),V(Ee,{key:5,"field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).IdKey?(f(),V(Ee,{key:6,"field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).Object?(f(),V(dt,{key:7,class:"content","field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).Width?(f(),V(pl,{key:8,class:"content","field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).HAlign?(f(),V(Ze,{key:9,class:"content",direction:"horizontal","field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).VAlign?(f(),V(Ze,{key:10,class:"content",direction:"vertical","field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).Padding?(f(),V(Eo,{key:11,class:"content","field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.type==A(Z).Tools?(f(),V(El,{key:12,"field-key":p,"component-id":s.value.id},null,8,["field-key","component-id"])):C("",!0),c.desc?(f(),b("div",Ll,L(c.desc),1)):C("",!0)])]))),128))])),64))])])):C("",!0)}}),Wl=G(Nl,[["__scopeId","data-v-223e00e9"]]),Pe=t=>(ne("data-v-7f670211"),t=t(),oe(),t),Pl={key:0,class:"BuilderSettingsBinding"},Vl=Pe(()=>n("div",{class:"sectionTitle"},[n("i",{class:"material-symbols-outlined"},"link"),n("h3",null,"Binding")],-1)),jl={class:"main"},Kl={class:"fieldWrapper"},Hl=Pe(()=>n("span",{class:"name"},"State element",-1)),Dl=Pe(()=>n("div",{class:"desc"},' Links this component to a state element, in a two-way fashion. Reference the state element directly, i.e. use "my_var" instead of "@{my_var}". ',-1)),Yl=X({__name:"BuilderSettingsBinding",setup(t){const e=W(P.core),o=W(P.builderManager),{setBinding:l}=se(e,o),s=F(()=>e.getComponentById(o.getSelectedId()));return(u,i)=>{var a;return A(o).isSelectionActive()?(f(),b("div",Pl,[Vl,n("div",jl,[n("div",Kl,[Hl,z(te,{type:"state",class:"content",value:(a=s.value.binding)==null?void 0:a.stateRef,placeholder:"my_var",onInput:i[0]||(i[0]=d=>A(l)(s.value.id,d.target.value))},null,8,["value"]),Dl])])])):C("",!0)}}}),zl=G(Yl,[["__scopeId","data-v-7f670211"]]),Ie=t=>(ne("data-v-effd1a53"),t=t(),oe(),t),Ul={key:0,class:"BuilderSettingsVisibility"},Xl=Ie(()=>n("div",{class:"sectionTitle"},[n("i",{class:"material-symbols-outlined"}," visibility "),n("h3",null,"Visibility")],-1)),Gl={class:"main"},Jl={class:"chipStack"},Ql={key:0,class:"fieldWrapper"},ql=Ie(()=>n("span",{class:"name"},"Visibility value",-1)),Zl={class:"flexRow"},ei=["checked"],ti=Ie(()=>n("span",null,"Reverse",-1)),si=Ie(()=>n("div",{class:"desc"},' Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}". ',-1)),ni=X({__name:"BuilderSettingsVisibility",setup(t){const e=W(P.core),o=W(P.builderManager),{setVisibleValue:l}=se(e,o),s=F(()=>e.getComponentById(o.getSelectedId()));return(u,i)=>{var a,d;return A(o).isSelectionActive()?(f(),b("div",Ul,[Xl,n("div",Gl,[n("div",Jl,[n("div",{class:j(["chip",{active:typeof s.value.visible>"u"||s.value.visible.expression===!0}]),onClick:i[0]||(i[0]=()=>A(l)(s.value.id,!0))}," Yes ",2),n("div",{class:j(["chip",{active:((a=s.value.visible)==null?void 0:a.expression)===!1}]),onClick:i[1]||(i[1]=()=>A(l)(s.value.id,!1))}," No ",2),n("div",{class:j(["chip",{active:((d=s.value.visible)==null?void 0:d.expression)==="custom"}]),onClick:i[2]||(i[2]=()=>{var m,h;return A(l)(s.value.id,"custom",(m=s.value.visible)==null?void 0:m.binding,(h=s.value.visible)==null?void 0:h.reversed)})}," Custom ",2)]),typeof s.value.visible<"u"&&s.value.visible.expression==="custom"?(f(),b("div",Ql,[ql,z(te,{value:s.value.visible.binding,type:"state",class:"content",placeholder:"my_visibility_state_value",onInput:i[3]||(i[3]=m=>A(l)(s.value.id,"custom",m.target.value,s.value.visible.reversed))},null,8,["value"]),n("div",Zl,[n("input",{type:"checkbox",checked:s.value.visible.reversed,onInput:i[4]||(i[4]=m=>A(l)(s.value.id,"custom",s.value.visible.binding,m.target.checked))},null,40,ei),ti]),si])):C("",!0)])])):C("",!0)}}}),oi=G(ni,[["__scopeId","data-v-effd1a53"]]),li=["data-writer-tooltip"],ii=X({__name:"BuilderCopyText",setup(t){const e=O("Copy to clipboard");function o(l){const s=l.target.textContent;navigator.clipboard.writeText(s),e.value="Copied!",setTimeout(()=>{e.value="Copy to clipboard"},1e3)}return(l,s)=>(f(),b("span",{class:"BuilderCopyText","data-writer-tooltip":e.value,onClick:o},[tt(l.$slots,"default",{},void 0,!0)],8,li))}}),ai=G(ii,[["__scopeId","data-v-46ba30f4"]]),Se=t=>(ne("data-v-38ad5e4b"),t=t(),oe(),t),ci={key:0,class:"BuilderSettings"},ri={class:"windowBar"},ui={class:"title"},di=["title"],vi=Se(()=>n("i",{class:"material-symbols-outlined"},"help",-1)),pi={key:0,class:"material-symbols-outlined"},hi={key:1,class:"material-symbols-outlined"},fi=Se(()=>n("i",{class:"material-symbols-outlined"},"close",-1)),_i=[fi],mi={key:0,class:"docs"},yi={key:0},gi={key:1,class:"markdown"},ki={key:1,class:"warning cmc-warning"},bi=Se(()=>n("i",{class:"material-symbols-outlined"},"warning",-1)),$i=Se(()=>n("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1)),xi=[bi,$i],Ii=["inert"],Si={class:"debug"},Ci=X({__name:"BuilderSettings",setup(t){const e=W(P.core),o=W(P.builderManager),l=O(!1),s=F(()=>e.getComponentById(o.getSelectedId())),u=F(()=>s.value.isCodeManaged),i=F(()=>{const{type:_}=s.value;return e.getComponentDefinition(_)}),a=()=>{o.setSelection(null)};et(s,_=>{_||a()});const d=()=>{l.value=!l.value},m=F(()=>{var _;return Object.values(((_=i.value)==null?void 0:_.events)??{}).some(E=>E.bindable)}),h=F(()=>{var _;if((_=i.value)!=null&&_.description)return i.value.description.trim()}),p=F(()=>{var _;if((_=i.value)!=null&&_.docs)return i.value.docs.trim()}),c=()=>ht.parse(p.value);return(_,E)=>{const I=Le("dompurify-html");return A(o).isSelectionActive()?(f(),b("div",ci,[n("div",ri,[n("div",ui,L(i.value.name),1),h.value||p.value?(f(),b("button",{key:0,class:"windowAction",tabindex:"0",title:(l.value?"Hide":"Show")+" inline docs",onClick:d},[vi,l.value?(f(),b("i",pi,"expand_less")):(f(),b("i",hi,"expand_more"))],8,di)):C("",!0),n("button",{class:"windowAction",tabindex:"0",title:"Close (Esc)","data-automation-action":"close",onClick:a},_i)]),l.value?(f(),b("div",mi,[h.value?(f(),b("div",yi,L(h.value),1)):C("",!0),p.value?re((f(),b("div",gi,null,512)),[[I,c()]]):C("",!0)])):C("",!0),u.value?(f(),b("div",ki,xi)):C("",!0),n("div",{class:"sections",inert:u.value},[z(Wl),!i.value.toolkit||i.value.toolkit=="core"?(f(),b(U,{key:0},[m.value?(f(),V(zl,{key:0})):C("",!0),z(us),z(oi)],64)):C("",!0)],8,Ii),n("div",Si,[ie(" Component id: "),z(ai,null,{default:ee(()=>[ie(L(A(o).getSelectedId()),1)]),_:1})])])):C("",!0)}}}),Fi=G(Ci,[["__scopeId","data-v-38ad5e4b"]]);export{Fi as default};
