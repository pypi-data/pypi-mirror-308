import _ from"./BuilderEmbeddedCodeEditor-DAG0asX-.js";import{B as k}from"./BuilderPanel-B7enEw0t.js";import{d as g,i as d,a as c,r as o,c as B,w as i,o as n,b as m,n as v,e as S,x as h,t as P,J as w,L as x,_ as E}from"./index-Bx-Up0aV.js";import"./toggleHighContrast-BjSyHUoH.js";const V=g({__name:"BuilderCodePanel",setup(j){const a=d(c.core),t=d(c.builderManager),s=o(a.runCode.value),e=o(null),l=o(!1),p=B(()=>[{icon:"save",name:"Save and run",keyboardShortcut:{modifierKey:!0,key:"S"},callback:()=>{C()},isDisabled:l.value},{icon:"close",name:"Close",keyboardShortcut:{modifierKey:!1,key:"Escape"},callback:()=>{t.openPanels.delete("code")}}]);i(a.runCode,u=>{s.value=u}),i(a.sessionTimestamp,()=>{l.value=!1,!y()&&(e.value=null)});function f(){e.value=null}function y(){return a.runCode.value==s.value}async function C(){e.value={type:"neutral",message:"Processing..."};try{l.value=!0,await a.sendCodeSaveRequest(s.value)}catch{e.value={type:"error",message:"Code hasn't been saved."},l.value=!1;return}e.value={type:"success",message:"Saved."}}return(u,r)=>(n(),m(k,{name:"Code",actions:p.value,class:"BuilderCodePanel"},{actionsCompanion:v(()=>[e.value?(n(),S("div",{key:0,class:h(["status",e.value.type])},P(e.value.message),3)):w("",!0)]),default:v(()=>[(n(),m(_,{key:Array.from(x(t).openPanels).join("-"),modelValue:s.value,"onUpdate:modelValue":[r[0]||(r[0]=b=>s.value=b),f],variant:"full",language:"python",disabled:l.value},null,8,["modelValue","disabled"]))]),_:1},8,["actions"]))}}),z=E(V,[["__scopeId","data-v-7d3c7812"]]);export{z as default};
